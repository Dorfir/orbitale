/* https://www.minifier.org/ */
var lib={};var canvas,parent_container,stage,exportRoot,imgName,arrayLength,nbrLoaded=0,scaleStage=1;var firstLoad=!0;var promoteur="";var nom_residence="Résidence Nymphéa";var subnom_residence="92000 Asnières-sur-Seine";var etages_noms=["BAS","R0","R1","R2","R3","R4","R5","BAS_NUIT","HAUT_NUIT","HAUT","HAUT_JUIN_09","HAUT_JUIN_12","HAUT_JUIN_18","HAUT_DECEMBRE_09","HAUT_DECEMBRE_12","HAUT_DECEMBRE_16","GOOGLE"];var etages_display_noms=["BAS","RDC","R+1","R+2","R+3","R+4","R+5","BAS NUIT","HAUT NUIT","HAUT","","","","","","","In Situ"];var etages_type=["BAS","NIVEAU","NIVEAU","NIVEAU","NIVEAU","NIVEAU","NIVEAU","NUIT","NUIT","HAUT","SOLEIL","SOLEIL","SOLEIL","SOLEIL","SOLEIL","SOLEIL","IN_SITU"];var etages=[];var etages_niveau_count=0;var etagesLoaded=[];var ensoleillement_description=[];var ensoleillement_selection={month:0,hour:1};var listHautLD=[],listBasLD=[],listEtagesLD=[];var listHautHD=[],listBasHD=[],listEtagesHD=[];var canvas_rect={'x':0,'y':0,'w':0,'h':0};var T1Panel,T2Panel,T3Panel,T4Panel,T5Panel,T6Panel,panelOpen=!1;var imgPlan,currentPlan=null,isSocial=!0,uriPDF="",openLightbox=!1;var lots,social;var theFrameInFullscreen=!1;let isIpad=/Macintosh/i.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1;var ldi;var is_mode_nuit_active=!1;var is_btn_fullscreen_visible=!0;var is_btn_ensoleillement_visible=!0;var is_btn_mode_nuit_visible=!0;var is_btn_in_situ_visible=!0;var is_btn_haut_visible=!0;var is_btn_bas_visible=!0;var is_cartouche_visible=!1;var texte_menu_gauche=!1;var close_cross_on_galerie=!1;var is_galerie_active=!0;var is_video_active=!0;var is_price_visible=!0;var tri_liste_typos_selected=[];var tri_liste_specific_selected=[];var tri_liste_exterieurs_selected=[];var superficie_selected=[5,105];var prix_selected=[45000,400000];var tri_selection_actuel=null;var tri_fiche_recap_first_display=!0;var current_fiche_result_cellule_index=0;var current_fiche_result_aerien_index=0;var hide_panel_on_mobile=!0;var clicked_object=null;var pdv_pas_de_plan="./assets/no_pdv.jpg";var pdv_vignette_folder="./PDV/Vignettes/LD/";var pdv_folder="./PDV/";var pdv_vignette_size=newRect(0,0,238,168);var imageLD=newRect(0,0,720,405);var imageHD=newRect(0,0,2560,1440);var initialeSize=newRect(0,0,1920,1080);var canvasSize=newRect(0,0,1920,1080);var documentSize=newRect(0,0,1920,1080);var parentSize=newRect(0,0,1280,830);var movedAxo=newVector2D(0,0);var clickedPos=newVector2D(0,0);var originAxo=newVector2D(0,0);var offsetPanel=newVector2D(-960,-540);var offsetPanelNoZone=newVector2D(-960,-540);var arrangePanel=newVector2D(0,0);var rayonCircle=12;var epaisseurCroix=0.75;var tailleCroix=5;var decalPuce=newVector2D(0,0);var puceSize=newRect(0,0,60,28);var roundedCorner=10;var fluxLotsActif=!1;var fluxLotsResidence="nomResidence";var fluxLotsParser="Adresse_parser.php";var fluxLoaded=!1;var flux=null;var lots_saved;var applicationEmbed=!1;var allowFullScreen=!0;var applicationFromLocalStorage=(window.location.protocol.includes("file"));var currentEtage="GOOGLE";var currentFrame=32;var imageMin=0;var imageMax=35;var borne=5;var zoomValue=1.0;var zoomMin=1.0;var zoomMax=1.5;var pasZoom=0.1;var pinchValue=1.0;var mouseClicked=2;var mouseOut=0;var roseStartAngle=32;var roseAngle=roseStartAngle;var pasAngle=10;var T1view=!0;var T2view=!0;var T3view=!0;var T4view=!0;var T5view=!0;var T6view=!0;var T1=!0;var T2=!0;var T3=!0;var T4=!0;var T5=!0;var T6=!0;var colorT1='#7196B9';var colorT2='#C68886';var colorT3='#D8C481';var colorT4='#796756';var colorT5='#78CAED';var colorT6='#0d2b62';var colorROOM='#C60000';var colorSocial='#999999';var hideSocialArea=!1;var positionBT=[newVector2D(118.1,-76.65),newVector2D(195.7,-76.65),newVector2D(283.3,-76.65),newVector2D(370.9,-76.65)];var deplace=!1;var cw=!0;var cwRose=!0;var affichageNomLots=!1;var planSitu=!1;var affPDF=!1;var affSolen=!1;var prefix_solen="";var displayIsMobile=!1;var swiper;social=[];var container_size={'width':0,'height':0};var canvas_ratio=1.77777;var isTriActif=!0;var tri_selection=null;var tri_lots_clean=null;var tri_lots_favoris=null;var tri_liste_typos=null,tri_liste_typo_selected=new Array();var tri_liste_typos_occurences=null;var tri_liste_exterieur=null,tri_liste_exterieur_selected=new Array();var tri_liste_specific=null,tri_liste_specific_selected=new Array();var tri_is_surface_defined=!1;var tri_surface_min=0,tri_surface_max=0;var tri_surface_min_selected=0,tri_surface_max_selected=0;var tri_selector_container=null;var tri_table_container=null;var tri_table_plan_mouseup_partial_propagation=!1;var tri_table_scroll_active=!1;var tri_table_scroll_old_pos=null;var tri_scroll_is_moving=!1;var tri_table_is_scrollable=!1;var tri_table_overlay_mousedown_interval=null;var tri_panel_width='20.83';var tri_table_favoris_is_displayed=!1;var tri_favoris_zip=null;etages=new Object();etages_noms.forEach(function(etage_name,etage_index){etages[etage_name]={"prefix":etage_name,"easeljs_elem":null,"easeljs_anim":null,"listLD":[],"listHD":[],"LD_loaded":!1,"nom_affichage":etages_display_noms[etage_index],"etage_type":etages_type[etage_index]}});for(let etage_name in etages){let etage=etages[etage_name];for(let i=0;i<=35;i++){etage.listLD.push({src:"images/LD/"+etage.prefix+"_"+formatNumber(i,3)+".jpg",html_id:etage.prefix+"_"+formatNumber(i,3)});etage.listHD.push({src:"images/HD/"+etage.prefix+"_"+formatNumber(i,3)+".jpg",html_id:etage.prefix+"_"+formatNumber(i,3),preload:new Image()});$('#preload_images').append('<img id="preload_'+etage.prefix+"_"+formatNumber(i,3)+'" src=""/>')}};etages_niveau_count=etages_type.filter(function(type){return type=="NIVEAU"}).length;function defineVariables(){swiper=new Swiper('.swiper-container',{direction:'horizontal',loop:!1,navigation:{nextEl:'.swiper-button-next',prevEl:'.swiper-button-prev',},});for(let etage_name in etages){let etage=etages[etage_name];etage.easeljs_elem=exportRoot.Axo['Axo_'+etage.prefix];etage.easeljs_anim=exportRoot.Axo['Axo_'+etage.prefix][etage.prefix]};lots=[{id:"0",nom:"A001",type:"ROOM",cat:"std",surface:"34.1",niveau:"R0",social:!1,cellule:"Hall_01",exterieur:"",batiment:"A",orientation:"Toutes expositions",nbre_chambres:null,nbre_sdb:1,surface_annexe:null,cell:exportRoot.Axo.Axo_R0.PlanBT1,coord:APPT_001,appt:null,puce:null,hidden:!1,pdf:"HALL",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:null,specific:"",favori:1},{id:"1",nom:"A002",type:"T1",cat:"std",surface:"34.1",niveau:"R0",social:!1,cellule:"T1",exterieur:"",batiment:"A",orientation:"Toutes expositions",nbre_chambres:null,nbre_sdb:1,surface_annexe:null,cell:exportRoot.Axo.Axo_R0.PlanBT2,coord:APPT_002,appt:null,puce:null,hidden:!1,pdf:"A002",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:60000,specific:"BRS",favori:0},{id:"2",nom:"A003",type:"T3",cat:"std",surface:"62.8",niveau:"R0",social:!1,cellule:"T3",exterieur:"terrasse",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R0.PlanBT3,coord:APPT_003,appt:null,puce:null,hidden:!1,pdf:"A003",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"handicap",favori:0},{id:"3",nom:"A101",type:"T3",cat:"std",surface:"62.8",niveau:"R1",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R1.PlanBT1,coord:APPT_101,appt:null,puce:null,hidden:!1,pdf:"A101",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"BRS handicap",favori:1},{id:"4",nom:"A102",type:"T3",cat:"std",surface:"62.8",niveau:"R1",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R1.PlanBT2,coord:APPT_102,appt:null,puce:null,hidden:!1,pdf:"A102",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"5",nom:"A103",type:"T2",cat:"std",surface:"40.5",niveau:"R1",social:!1,cellule:"T2",exterieur:"",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:null,cell:exportRoot.Axo.Axo_R1.PlanBT3,coord:APPT_103,appt:null,puce:null,hidden:!1,pdf:"A103",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"6",nom:"A104",type:"T2",cat:"std",surface:"42.9",niveau:"R1",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R1.PlanBT4,coord:APPT_104,appt:null,puce:null,hidden:!1,pdf:"A104",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"7",nom:"A105",type:"T2",cat:"std",surface:"42.9",niveau:"R1",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R1.PlanBT5,coord:APPT_105,appt:null,puce:null,hidden:!1,pdf:"A105",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"8",nom:"A106",type:"T2",cat:"std",surface:"42.9",niveau:"R1",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R1.PlanBT6,coord:APPT_106,appt:null,puce:null,hidden:!1,pdf:"A106",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"9",nom:"A107",type:"T2",cat:"std",surface:"42.9",niveau:"R1",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R1.PlanBT7,coord:APPT_107,appt:null,puce:null,hidden:!1,pdf:"A107",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"10",nom:"A108",type:"T1",cat:"std",surface:"34.1",niveau:"R1",social:!1,cellule:"T1",exterieur:"",batiment:"A",orientation:"Toutes expositions",nbre_chambres:null,nbre_sdb:1,surface_annexe:"34.1",cell:exportRoot.Axo.Axo_R1.PlanBT8,coord:APPT_108,appt:null,puce:null,hidden:!1,pdf:"A108",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:60000,specific:"",favori:0},{id:"11",nom:"A109",type:"T3",cat:"std",surface:"62.8",niveau:"R1",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"62.8",cell:exportRoot.Axo.Axo_R1.PlanBT9,coord:APPT_109,appt:null,puce:null,hidden:!1,pdf:"A109",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"12",nom:"A110",type:"T1",cat:"std",surface:"34.1",niveau:"R1",social:!1,cellule:"T1",exterieur:"",batiment:"A",orientation:"Toutes expositions",nbre_chambres:null,nbre_sdb:1,surface_annexe:"34.1",cell:exportRoot.Axo.Axo_R1.PlanBT10,coord:APPT_110,appt:null,puce:null,hidden:!1,pdf:"A110",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:60000,specific:"",favori:0},{id:"13",nom:"A111",type:"T3",cat:"std",surface:"62.8",niveau:"R1",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"62.8",cell:exportRoot.Axo.Axo_R1.PlanBT11,coord:APPT_111,appt:null,puce:null,hidden:!1,pdf:"A111",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"14",nom:"B101",type:"T2",cat:"std",surface:"50.4",niveau:"R1",social:!1,cellule:"T2",exterieur:"",batiment:"B",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:null,cell:exportRoot.Axo.Axo_R1.PlanBT12,coord:APPT_112,appt:null,puce:null,hidden:!1,pdf:"B101",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"15",nom:"B102",type:"T3",cat:"std",surface:"69.6",niveau:"R1",social:!1,cellule:"T3",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"12.5",cell:exportRoot.Axo.Axo_R1.PlanBT13,coord:APPT_113,appt:null,puce:null,hidden:!1,pdf:"B102",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"16",nom:"B103",type:"T4",cat:"std",surface:"83.3",niveau:"R1",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:1,surface_annexe:"58.5",cell:exportRoot.Axo.Axo_R1.PlanBT14,coord:APPT_114,appt:null,puce:null,hidden:!1,pdf:"B103",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"17",nom:"B104",type:"T2",cat:"std",surface:"52.5",niveau:"R1",social:!1,cellule:"T2",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"5.9",cell:exportRoot.Axo.Axo_R1.PlanBT15,coord:APPT_115,appt:null,puce:null,hidden:!1,pdf:"B104",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:1},{id:"18",nom:"B105",type:"T2",cat:"std",surface:"52.5",niveau:"R1",social:!1,cellule:"T2",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"5.9",cell:exportRoot.Axo.Axo_R1.PlanBT16,coord:APPT_116,appt:null,puce:null,hidden:!1,pdf:"B105",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"19",nom:"B106",type:"T1",cat:"std",surface:"29.8",niveau:"R1",social:!1,cellule:"T1",exterieur:"",batiment:"B",orientation:"Toutes expositions",nbre_chambres:null,nbre_sdb:1,surface_annexe:null,cell:exportRoot.Axo.Axo_R1.PlanBT17,coord:APPT_117,appt:null,puce:null,hidden:!1,pdf:"B106",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:60000,specific:"",favori:0},{id:"20",nom:"B107",type:"T2",cat:"std",surface:"52.5",niveau:"R1",social:!1,cellule:"T2",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"5.9",cell:exportRoot.Axo.Axo_R1.PlanBT18,coord:APPT_118,appt:null,puce:null,hidden:!1,pdf:"B107",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"21",nom:"B108",type:"T4",cat:"std",surface:"83.3",niveau:"R1",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:1,surface_annexe:"58.5",cell:exportRoot.Axo.Axo_R1.PlanBT19,coord:APPT_119,appt:null,puce:null,hidden:!1,pdf:"B108",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"22",nom:"B109",type:"T2",cat:"std",surface:"52.5",niveau:"R1",social:!1,cellule:"T2",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"5.9",cell:exportRoot.Axo.Axo_R1.PlanBT20,coord:APPT_120,appt:null,puce:null,hidden:!1,pdf:"B109",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"23",nom:"A201",type:"T3",cat:"std",surface:"62.8",niveau:"R2",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R2.PlanBT1,coord:APPT_201,appt:null,puce:null,hidden:!1,pdf:"A201",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"24",nom:"A202",type:"T3",cat:"std",surface:"62.8",niveau:"R2",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R2.PlanBT2,coord:APPT_202,appt:null,puce:null,hidden:!1,pdf:"A202",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"25",nom:"A203",type:"T2",cat:"std",surface:"40.5",niveau:"R2",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:null,cell:exportRoot.Axo.Axo_R2.PlanBT3,coord:APPT_203,appt:null,puce:null,hidden:!1,pdf:"A203",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"26",nom:"A204",type:"T2",cat:"std",surface:"42.9",niveau:"R2",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R2.PlanBT4,coord:APPT_204,appt:null,puce:null,hidden:!1,pdf:"A204",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"27",nom:"A205",type:"T2",cat:"std",surface:"42.9",niveau:"R2",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R2.PlanBT5,coord:APPT_205,appt:null,puce:null,hidden:!1,pdf:"A205",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"28",nom:"A206",type:"T2",cat:"std",surface:"42.9",niveau:"R2",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R2.PlanBT6,coord:APPT_206,appt:null,puce:null,hidden:!1,pdf:"A206",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"29",nom:"A207",type:"T2",cat:"std",surface:"42.9",niveau:"R2",social:!1,cellule:"T2",exterieur:"",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R2.PlanBT7,coord:APPT_207,appt:null,puce:null,hidden:!1,pdf:"A207",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:1},{id:"30",nom:"A208",type:"T1",cat:"std",surface:"34.1",niveau:"R2",social:!1,cellule:"T1",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:null,nbre_sdb:1,surface_annexe:"34.1",cell:exportRoot.Axo.Axo_R2.PlanBT8,coord:APPT_208,appt:null,puce:null,hidden:!1,pdf:"A208",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:60000,specific:"",favori:0},{id:"31",nom:"A209",type:"T3",cat:"std",surface:"62.8",niveau:"R2",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R2.PlanBT9,coord:APPT_209,appt:null,puce:null,hidden:!1,pdf:"A209",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"32",nom:"A210",type:"T2",cat:"std",surface:"42.9",niveau:"R2",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R2.PlanBT10,coord:APPT_210,appt:null,puce:null,hidden:!1,pdf:"A210",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"33",nom:"A211",type:"T3",cat:"std",surface:"62.8",niveau:"R2",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R2.PlanBT11,coord:APPT_211,appt:null,puce:null,hidden:!1,pdf:"A211",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"34",nom:"B201",type:"T2",cat:"std",surface:"50.4",niveau:"R2",social:!1,cellule:"T2",exterieur:"",batiment:"B",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:null,cell:exportRoot.Axo.Axo_R2.PlanBT12,coord:APPT_212,appt:null,puce:null,hidden:!1,pdf:"B201",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"35",nom:"B202",type:"T3",cat:"std",surface:"69.6",niveau:"R2",social:!1,cellule:"T3",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"12.5",cell:exportRoot.Axo.Axo_R2.PlanBT13,coord:APPT_213,appt:null,puce:null,hidden:!1,pdf:"B202",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"36",nom:"B203",type:"T4",cat:"std",surface:"83.3",niveau:"R2",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:1,surface_annexe:"58.5",cell:exportRoot.Axo.Axo_R2.PlanBT14,coord:APPT_214,appt:null,puce:null,hidden:!1,pdf:"B203",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"37",nom:"B204",type:"T3",cat:"std",surface:"69.6",niveau:"R2",social:!1,cellule:"T3",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"12.5",cell:exportRoot.Axo.Axo_R2.PlanBT15,coord:APPT_215,appt:null,puce:null,hidden:!1,pdf:"B204",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"38",nom:"B205",type:"T1",cat:"std",surface:"29.8",niveau:"R2",social:!1,cellule:"T1",exterieur:"",batiment:"B",orientation:"Toutes expositions",nbre_chambres:null,nbre_sdb:1,surface_annexe:null,cell:exportRoot.Axo.Axo_R2.PlanBT16,coord:APPT_216,appt:null,puce:null,hidden:!1,pdf:"B205",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:60000,specific:"",favori:0},{id:"39",nom:"B206",type:"T4",cat:"std",surface:"83.3",niveau:"R2",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:1,surface_annexe:"58.5",cell:exportRoot.Axo.Axo_R2.PlanBT17,coord:APPT_217,appt:null,puce:null,hidden:!1,pdf:"B206",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"40",nom:"B207",type:"T4",cat:"std",surface:"83.3",niveau:"R2",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:1,surface_annexe:"58.5",cell:exportRoot.Axo.Axo_R2.PlanBT18,coord:APPT_218,appt:null,puce:null,hidden:!1,pdf:"B207",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"41",nom:"B208",type:"T2",cat:"std",surface:"52.5",niveau:"R2",social:!1,cellule:"T2",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"5.9",cell:exportRoot.Axo.Axo_R2.PlanBT19,coord:APPT_219,appt:null,puce:null,hidden:!1,pdf:"B208",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"42",nom:"A301",type:"T3",cat:"std",surface:"62.8",niveau:"R3",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R3.PlanBT1,coord:APPT_301,appt:null,puce:null,hidden:!1,pdf:"A301",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"43",nom:"A302",type:"T3",cat:"std",surface:"62.8",niveau:"R3",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R3.PlanBT2,coord:APPT_302,appt:null,puce:null,hidden:!1,pdf:"A302",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:1},{id:"44",nom:"A303",type:"T3",cat:"std",surface:"62.8",niveau:"R3",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R3.PlanBT3,coord:APPT_303,appt:null,puce:null,hidden:!1,pdf:"A303",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"45",nom:"A304",type:"T3",cat:"std",surface:"62.8",niveau:"R3",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R3.PlanBT4,coord:APPT_304,appt:null,puce:null,hidden:!1,pdf:"A304",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"46",nom:"A305",type:"T2",cat:"std",surface:"42.9",niveau:"R3",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R3.PlanBT5,coord:APPT_305,appt:null,puce:null,hidden:!1,pdf:"A305",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"47",nom:"A306",type:"T2",cat:"std",surface:"42.9",niveau:"R3",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R3.PlanBT6,coord:APPT_306,appt:null,puce:null,hidden:!1,pdf:"A306",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"48",nom:"A307",type:"T1",cat:"std",surface:"34.1",niveau:"R3",social:!1,cellule:"T1",exterieur:"",batiment:"A",orientation:"Toutes expositions",nbre_chambres:null,nbre_sdb:1,surface_annexe:null,cell:exportRoot.Axo.Axo_R3.PlanBT7,coord:APPT_307,appt:null,puce:null,hidden:!1,pdf:"A307",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:60000,specific:"",favori:0},{id:"49",nom:"A308",type:"T3",cat:"std",surface:"62.8",niveau:"R3",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R3.PlanBT8,coord:APPT_308,appt:null,puce:null,hidden:!1,pdf:"A308",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"50",nom:"A309",type:"T2",cat:"std",surface:"42.9",niveau:"R3",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R3.PlanBT9,coord:APPT_309,appt:null,puce:null,hidden:!1,pdf:"A309",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"51",nom:"A310",type:"T3",cat:"std",surface:"62.8",niveau:"R3",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R3.PlanBT10,coord:APPT_310,appt:null,puce:null,hidden:!1,pdf:"A310",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"52",nom:"B301",type:"T2",cat:"std",surface:"50.4",niveau:"R3",social:!1,cellule:"T2",exterieur:"",batiment:"B",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:null,cell:exportRoot.Axo.Axo_R3.PlanBT11,coord:APPT_311,appt:null,puce:null,hidden:!1,pdf:"B301",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"53",nom:"B302",type:"T3",cat:"std",surface:"69.6",niveau:"R3",social:!1,cellule:"T3",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"12.5",cell:exportRoot.Axo.Axo_R3.PlanBT12,coord:APPT_312,appt:null,puce:null,hidden:!1,pdf:"B302",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"54",nom:"B303",type:"T4",cat:"std",surface:"83.3",niveau:"R3",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"58.5",cell:exportRoot.Axo.Axo_R3.PlanBT13,coord:APPT_313,appt:null,puce:null,hidden:!1,pdf:"B303",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"55",nom:"B304",type:"T3",cat:"std",surface:"69.6",niveau:"R3",social:!1,cellule:"T3",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"12.5",cell:exportRoot.Axo.Axo_R3.PlanBT14,coord:APPT_314,appt:null,puce:null,hidden:!1,pdf:"B304",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"56",nom:"B305",type:"T1",cat:"std",surface:"29.8",niveau:"R3",social:!1,cellule:"T1",exterieur:"",batiment:"B",orientation:"Toutes expositions",nbre_chambres:null,nbre_sdb:1,surface_annexe:null,cell:exportRoot.Axo.Axo_R3.PlanBT15,coord:APPT_315,appt:null,puce:null,hidden:!1,pdf:"B305",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:60000,specific:"",favori:0},{id:"57",nom:"B306",type:"T4",cat:"std",surface:"83.3",niveau:"R3",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"58.5",cell:exportRoot.Axo.Axo_R3.PlanBT16,coord:APPT_316,appt:null,puce:null,hidden:!1,pdf:"B306",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"58",nom:"B307",type:"T4",cat:"std",surface:"83.3",niveau:"R3",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"58.5",cell:exportRoot.Axo.Axo_R3.PlanBT17,coord:APPT_317,appt:null,puce:null,hidden:!1,pdf:"B307",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:60000,specific:"",favori:0},{id:"59",nom:"B308",type:"T2",cat:"std",surface:"52.5",niveau:"R3",social:!1,cellule:"T2",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"5.9",cell:exportRoot.Axo.Axo_R3.PlanBT18,coord:APPT_318,appt:null,puce:null,hidden:!1,pdf:"B308",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"60",nom:"A401",type:"T3",cat:"std",surface:"62.8",niveau:"R4",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R4.PlanBT1,coord:APPT_401,appt:null,puce:null,hidden:!1,pdf:"A401",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"61",nom:"A402",type:"T4",cat:"std",surface:"86.1",niveau:"R4",social:!1,cellule:"T4",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"25.5",cell:exportRoot.Axo.Axo_R4.PlanBT2,coord:APPT_402,appt:null,puce:null,hidden:!1,pdf:"A402",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"62",nom:"A403",type:"T3",cat:"std",surface:"62.8",niveau:"R4",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R4.PlanBT3,coord:APPT_403,appt:null,puce:null,hidden:!1,pdf:"A403",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"63",nom:"A404",type:"T2",cat:"std",surface:"42.9",niveau:"R4",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R4.PlanBT4,coord:APPT_404,appt:null,puce:null,hidden:!1,pdf:"A404",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"64",nom:"A405",type:"T2",cat:"std",surface:"42.9",niveau:"R4",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R4.PlanBT5,coord:APPT_405,appt:null,puce:null,hidden:!1,pdf:"A405",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"65",nom:"A406",type:"T1",cat:"std",surface:"34.1",niveau:"R4",social:!1,cellule:"T1",exterieur:"",batiment:"A",orientation:"Toutes expositions",nbre_chambres:null,nbre_sdb:1,surface_annexe:null,cell:exportRoot.Axo.Axo_R4.PlanBT6,coord:APPT_406,appt:null,puce:null,hidden:!1,pdf:"A406",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:60000,specific:"",favori:0},{id:"66",nom:"A407",type:"T3",cat:"std",surface:"62.8",niveau:"R4",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R4.PlanBT7,coord:APPT_407,appt:null,puce:null,hidden:!1,pdf:"A407",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"67",nom:"A408",type:"T2",cat:"std",surface:"42.9",niveau:"R4",social:!1,cellule:"T2",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"9.3",cell:exportRoot.Axo.Axo_R4.PlanBT8,coord:APPT_408,appt:null,puce:null,hidden:!1,pdf:"A408",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"68",nom:"A409",type:"T3",cat:"std",surface:"62.8",niveau:"R4",social:!1,cellule:"T3",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R4.PlanBT9,coord:APPT_409,appt:null,puce:null,hidden:!1,pdf:"A409",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"69",nom:"B401",type:"T2",cat:"std",surface:"50.4",niveau:"R4",social:!1,cellule:"T2",exterieur:"",batiment:"B",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:null,cell:exportRoot.Axo.Axo_R4.PlanBT10,coord:APPT_410,appt:null,puce:null,hidden:!1,pdf:"B401",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"70",nom:"B402",type:"T4D",cat:"std",surface:"83.8",niveau:"R4",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"43.8",cell:exportRoot.Axo.Axo_R4.PlanBT11,coord:APPT_411_BAS,appt:null,puce:null,hidden:!1,pdf:"B402",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"71",nom:"B403",type:"T4B",cat:"std",surface:"83.3",niveau:"R4",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"58.5",cell:exportRoot.Axo.Axo_R4.PlanBT12,coord:APPT_412,appt:null,puce:null,hidden:!1,pdf:"B403",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"72",nom:"B404",type:"T5D",cat:"std",surface:"101.2",niveau:"R4",social:!1,cellule:"T5",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:4,nbre_sdb:2,surface_annexe:"37.5",cell:exportRoot.Axo.Axo_R4.PlanBT13,coord:APPT_413_BAS,appt:null,puce:null,hidden:!1,pdf:"B404",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:160000,specific:"",favori:0},{id:"73",nom:"B405",type:"T4D",cat:"std",surface:"83.8",niveau:"R4",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"43.8",cell:exportRoot.Axo.Axo_R4.PlanBT14,coord:APPT_414_BAS,appt:null,puce:null,hidden:!1,pdf:"B405",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"74",nom:"B406",type:"T4D",cat:"std",surface:"83.8",niveau:"R4",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"43.8",cell:exportRoot.Axo.Axo_R4.PlanBT15,coord:APPT_415_BAS,appt:null,puce:null,hidden:!1,pdf:"B406",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"75",nom:"B407",type:"T4",cat:"std",surface:"83.3",niveau:"R4",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"58.5",cell:exportRoot.Axo.Axo_R4.PlanBT16,coord:APPT_416,appt:null,puce:null,hidden:!1,pdf:"B407",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"76",nom:"B408",type:"T2",cat:"std",surface:"52.5",niveau:"R4",social:!1,cellule:"T2",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"5.9",cell:exportRoot.Axo.Axo_R4.PlanBT17,coord:APPT_417,appt:null,puce:null,hidden:!1,pdf:"B408",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},{id:"77",nom:"B402",type:"T4D",cat:"std",surface:"83.8",niveau:"R5",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"43.8",cell:exportRoot.Axo.Axo_R5.PlanBT1,coord:APPT_411_HAUT,appt:null,puce:null,hidden:!1,pdf:"B402",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"78",nom:"B404",type:"T5D",cat:"std",surface:"101.2",niveau:"R5",social:!1,cellule:"T5",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:4,nbre_sdb:2,surface_annexe:"37.5",cell:exportRoot.Axo.Axo_R5.PlanBT2,coord:APPT_413_HAUT,appt:null,puce:null,hidden:!1,pdf:"B404",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:160000,specific:"",favori:0},{id:"79",nom:"B405",type:"T4D",cat:"std",surface:"83.8",niveau:"R5",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"43.8",cell:exportRoot.Axo.Axo_R5.PlanBT3,coord:APPT_414_HAUT,appt:null,puce:null,hidden:!1,pdf:"B405",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"80",nom:"B406",type:"T4D",cat:"std",surface:"83.8",niveau:"R5",social:!1,cellule:"T4",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"43.8",cell:exportRoot.Axo.Axo_R5.PlanBT4,coord:APPT_415_HAUT,appt:null,puce:null,hidden:!1,pdf:"B406",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"81",nom:"A501",type:"T3",cat:"std",surface:"62.8",niveau:"R5",social:!1,cellule:"T3 T4",exterieur:"balcon",batiment:"A",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:1,surface_annexe:"21.6",cell:exportRoot.Axo.Axo_R5.PlanBT5,coord:APPT_501,appt:null,puce:null,hidden:!1,pdf:"A501",visite360:"https://www.visiolab.fr/Visite360/LP_Promotion/ChatenayMalabry/T3/",aerien:"Jardin_R2_A206 Jardin_R2_A205",aerien360:"https://www.visiolab.fr/Panorama/Marignan/toulouse/allee_gloria/pano_etages/",cellule_axo:"cellule_axo_1",prix:120000,specific:"",favori:0},{id:"82",nom:"A502",type:"T4",cat:"std",surface:"83.8",niveau:"R5",social:!1,cellule:"T4",exterieur:"terrasse",batiment:"A",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"43.8",cell:exportRoot.Axo.Axo_R5.PlanBT6,coord:APPT_502,appt:null,puce:null,hidden:!1,pdf:"A502",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:"cellule_axo_2",prix:140000,specific:"",favori:0},{id:"83",nom:"A503",type:"T4",cat:"std",surface:"86.1",niveau:"R5",social:!1,cellule:null,exterieur:"terrasse",batiment:"A",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"25.5",cell:exportRoot.Axo.Axo_R5.PlanBT7,coord:APPT_503,appt:null,puce:null,hidden:!1,pdf:"A503",visite360:null,aerien:null,aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"84",nom:"A504",type:"T4",cat:"std",surface:"86.1",niveau:"R5",social:!1,cellule:"T4",exterieur:"terrasse",batiment:"A",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"25.5",cell:exportRoot.Axo.Axo_R5.PlanBT8,coord:APPT_504,appt:null,puce:null,hidden:!1,pdf:"A504",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"85",nom:"A505",type:"T4",cat:"std",surface:"86.1",niveau:"R5",social:!1,cellule:"T4",exterieur:"terrasse",batiment:"A",orientation:"Toutes expositions",nbre_chambres:3,nbre_sdb:2,surface_annexe:"25.5",cell:exportRoot.Axo.Axo_R5.PlanBT9,coord:APPT_505,appt:null,puce:null,hidden:!1,pdf:"A505",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:140000,specific:"",favori:0},{id:"86",nom:"B501",type:"T3",cat:"std",surface:"83.3",niveau:"R5",social:!1,cellule:"T3",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:2,surface_annexe:"58.5",cell:exportRoot.Axo.Axo_R5.PlanBT10,coord:APPT_506,appt:null,puce:null,hidden:!1,pdf:"B501",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"87",nom:"B506",type:"T3",cat:"std",surface:"83.3",niveau:"R5",social:!1,cellule:"T3",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:2,nbre_sdb:2,surface_annexe:"58.5",cell:exportRoot.Axo.Axo_R5.PlanBT11,coord:APPT_507,appt:null,puce:null,hidden:!1,pdf:"B506",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:120000,specific:"",favori:0},{id:"88",nom:"B507",type:"T2",cat:"std",surface:"52.5",niveau:"R5",social:!1,cellule:"T2",exterieur:"balcon",batiment:"B",orientation:"Toutes expositions",nbre_chambres:1,nbre_sdb:1,surface_annexe:"5.9",cell:exportRoot.Axo.Axo_R5.PlanBT12,coord:APPT_508,appt:null,puce:null,hidden:!1,pdf:"B507",visite360:null,aerien:"Jardin_R2_A206",aerien360:null,cellule_axo:null,prix:80000,specific:"",favori:0},]}
function getFlux(){if(fluxLotsActif){$.ajax({url:fluxLotsParser,type:"POST",dataType:"text",data:{residence:fluxLotsResidence},success:function(data,status){if(data=="Erreur"){fluxLoaded=!1}else{flux=JSON.parse(data);console.log("-------- Data parser --------");console.log(flux);fluxLoaded=!0}
launchLoadingLD(currentEtage)},error:function(jqXHR,textStatus,errorThrown){fluxLoaded=!1;launchLoadingLD(currentEtage)}})}else{launchLoadingLD(currentEtage)}}
function superficie_slide_handler(event,ui){let a=Math.ceil((ui.values[0]*100)/484);let b=Math.ceil((ui.values[1]*100)/484);if(a==0)a=1;if(b==0)b=1;superficie_selected=[a,b];if(superficie_selected[1]<=100){$('#display_superficie_range').html("Min: "+superficie_selected[0]+", Max: "+superficie_selected[1])}else{$('#display_superficie_range').html("Min: "+superficie_selected[0]+", Max: 100+")}
tri_check_research()}
function prix_slide_handler(event,ui){let a=Math.ceil((ui.values[0]*1000));let b=Math.ceil((ui.values[1]*1000));if(a==0)a=0;if(b==0)b=1;prix_selected=[a,b];tri_check_research()}
var tri_search_swiper,tri_grille_swiper,tri_liste_swiper;$(document).ready(function(){initLogo();if(isIniFrame()){$('#GUI-mobile_portrait_message').css('display','none');$('#big_container').css('display','block')}
$('#GUI-boussole').css('display','block');$('#tri_menu_gauche_buttons_container').css('display','block');$('#bandeau_droit_logo_visiolab').css('display','flex');if(promoteur=="bouygues"){texte_menu_gauche=!0;close_cross_on_galerie=!0;is_cartouche_visible=!0;deplace=!0}
if(is_cartouche_visible)$('#GUI-cartouche').css('display','block');const params=new Proxy(new URLSearchParams(window.location.search),{get:(searchParams,prop)=>searchParams.get(prop),});if(params.popup==1){$("#GUI-retour").css('display','block');$("#GUI-retour").click(function(){window.parent.postMessage("close_iframe","*")})}
canvas=document.getElementById("canvas");parent_container=document.getElementById("parent_container");if(isMobile()){displayIsMobile=!0;console.log("-- displayIsMobile");if(!$('#big_container').hasClass('mobile'))$('#big_container').addClass('mobile');if($('#GUI-menu').hasClass('desktop'))$('#GUI-menu').removeClass('desktop');if($('#GUI-menu').hasClass('reduce'))$('#GUI-menu').removeClass('reduce');if(!$('#GUI-menu').hasClass('mobile'))$('#GUI-menu').addClass('mobile');$('#GUI-menu.mobile #mySwiper').css('height',etages_niveau_count*20);$('#GUI-menu.mobile #menu_desktop').css('display','flex')}else{if(!$('#GUI-menu').hasClass('desktop'))$('#GUI-menu').addClass('desktop');if($('#GUI-menu').hasClass('reduce'))$('#GUI-menu').removeClass('reduce');if($('#GUI-menu').hasClass('mobile'))$('#GUI-menu').removeClass('mobile');$('#GUI-menu.desktop #mySwiper').css('height',etages_niveau_count*49);$('#GUI-menu.desktop #menu_desktop').css('display','flex')}
if(!displayIsMobile){$('#tri_volet_content_step01_scrollContent').attr('class','xCustomScroll')}else{$('#tri_volet_content_step01_scrollContent').css('overflow','auto')}
if(!displayIsMobile){$('#tri_volet_content_step02_fiche_scrollContent').css('overflow','auto');let tri_volet_content_step02_fiche_scrollContent=document.getElementById('tri_volet_content_step02_fiche_scrollContent');if(!tri_volet_content_step02_fiche_scrollContent.classList.contains('xCustomScroll'))
tri_volet_content_step02_fiche_scrollContent.classList.add('xCustomScroll');}else{$('#tri_volet_content_step02_fiche_scrollContent').css('overflow','auto')}
initBandeauDroit();bandeau_droit_calcul();initFavoris();if(is_btn_mode_nuit_visible)initModeNuit();if(texte_menu_gauche)$('#tri_menu_gauche_buttons_subcontainer').addClass('avec_texte');if(close_cross_on_galerie)$('#galerie_close').css('display','block');if(!is_galerie_active)$('#galerie_container_open_button').css('display','none');if(!is_video_active)$('#video_container_open_button').css('display','none');setEtageButton(currentEtage);initBandeauDroitButtons();if(cwRose){roseAngle=roseStartAngle+(currentFrame*pasAngle)}else{roseAngle=roseStartAngle+(currentFrame*(-1*pasAngle))}
rotateBoussole(roseAngle);$('#btZoomMoins').on('click touch',function(){zoomValue-=pasZoom;ApplyZoomRange(zoomValue)});$('#btZoomPlus').on('click touch',function(){zoomValue+=pasZoom;ApplyZoomRange(zoomValue)});getFlux();$('#fermer-lightbox').on('click touch',function(){closeLightBox()});$('#fermer-lightbox-cellule').on('click touch',function(){closeLightBox()});$('#fermer-lightbox-aerien').on('click touch',function(){closeLightBox()});initBoussoleButtons();$('#bt_FULLSCREEN').on('click touch',function(evt){fullscreenMode()});$('#tri_menu_gauche_buttons_subcontainer').on('click',function(e){if(e.target!==this)return;closeVideoAndGalerie()})
if(is_galerie_active)initGalerie();if(is_video_active)initVideo();initLightboxCellule();initLightboxAerien()});function triggerMobileMenu(open){if(open){$("#GUI-menu-mobile").animate({"left":"0%"},600);$("#GUI-menu-background").css('display','block')}else{$("#GUI-menu-mobile").animate({"left":"-20.83%"},600);$("#GUI-menu-background").css('display','none')}}
function resizeCanvas(){container_size.width=$("#canvas_container").width();container_size.height=$("#canvas_container").height();let ratio_state=1;if((container_size.width/container_size.height)>=canvas_ratio){let ratio_state=1;let largeur_image=Math.floor(canvas_ratio*container_size.height);let decalage_image=Math.floor((container_size.width-largeur_image));$('#canvas').css({'height':'100%','width':largeur_image});$('#canvas').css({'left':decalage_image,'top':0});scaleStage=largeur_image/initialeSize.width}else{let ratio_state=2;let hauteur_image=Math.floor(container_size.width/canvas_ratio);let decalage_image=Math.floor((container_size.height-hauteur_image)/2);$('#canvas').css({'height':hauteur_image,'width':'100%'});$('#canvas').css({'top':decalage_image,'left':0});scaleStage=hauteur_image/initialeSize.height}
canvas_rect.x=parseInt($("#canvas").css('left'));canvas_rect.y=parseInt($("#canvas").css('top'));canvas_rect.w=parseInt($("#canvas").css('width'));canvas_rect.h=parseInt($("#canvas").css('height'));canvas.width=canvas_rect.w;canvas.height=canvas_rect.h;stage.scaleX=scaleStage;stage.scaleY=scaleStage;let logo_left=0;if((!displayIsMobile)&&(canvas_rect.x<62)){logo_left=62}else if((displayIsMobile)&&(canvas_rect.x<50)){logo_left=50}else{logo_left=canvas_rect.x}
$('#GUI-logo').css('left',logo_left);$('#GUI-logo').css('top',canvas_rect.y);$('#GUI-cartouche').css('left',logo_left-3);$('#GUI-cartouche').css('top',canvas_rect.y+parseInt($('#GUI-logo').css('height'))+5);$('#GUI-retour').css('left',logo_left-3);let retour_y_offset=canvas_rect.y+parseInt($('#GUI-logo').css('height'));if(is_cartouche_visible)retour_y_offset+=parseInt($('#GUI-cartouche').css('height'))+5;$('#GUI-retour').css('top',retour_y_offset);$('#GUI-boussole').css('left',canvas_rect.x+Math.floor(canvas_rect.w/2));$('#GUI-boussole').css('bottom',container_size.height-(canvas_rect.y+canvas_rect.h)+10);$('#GUI-boussole').css('width',Math.round(canvas_rect.w*0.2));let fiche_container_width=parseInt($('#tri_volet_content_step02_fiche_scrollContent').css('width'));$('#results-fiche-view').css('width',fiche_container_width-10);loadingHD();resizeImagesIn(exportRoot.Axo["Axo_"+currentEtage][currentEtage]);stage.update();bandeau_droit_calcul()}
function bandeau_droit_calcul(){let bandeau_droit_height=$('#GUI-menu').height();if(!displayIsMobile){if(bandeau_droit_height<=350){if($('#GUI-menu').hasClass('desktop'))$('#GUI-menu').removeClass('desktop');if($('#GUI-menu').hasClass('reduce'))$('#GUI-menu').removeClass('reduce');if(!$('#GUI-menu').hasClass('mobile'))$('#GUI-menu').addClass('mobile');$('#GUI-menu.mobile #mySwiper').css('height',etages_niveau_count*20)}else{let eval_height=0;if(is_btn_fullscreen_visible)eval_height+=50;if(is_btn_ensoleillement_visible)eval_height+=135;if(is_btn_mode_nuit_visible)eval_height+=49;if(is_btn_in_situ_visible)eval_height+=100;etages_type.forEach(function(etage_type){if(etage_type=="BAS")eval_height+=100;if(etage_type=="HAUT")eval_height+=100});eval_height+=105;if(eval_height+180>bandeau_droit_height){if(!$('#GUI-menu').hasClass('desktop'))$('#GUI-menu').addClass('desktop');if(!$('#GUI-menu').hasClass('reduce'))$('#GUI-menu').addClass('reduce');if($('#GUI-menu').hasClass('mobile'))$('#GUI-menu').removeClass('mobile');$('#GUI-menu.desktop #mySwiper').css('height',etages_niveau_count*35)}else{if(!$('#GUI-menu').hasClass('desktop'))$('#GUI-menu').addClass('desktop');if($('#GUI-menu').hasClass('reduce'))$('#GUI-menu').removeClass('reduce');if($('#GUI-menu').hasClass('mobile'))$('#GUI-menu').removeClass('mobile');$('#GUI-menu.desktop #mySwiper').css('height',etages_niveau_count*49)}}}else{}}
function initLogo(){switch(cleanString(promoteur)){case "bouygues":$('#GUI-logo').attr('src','assets/logos/logo_bouygues.svg');$('#GUI-logo').addClass('bouygues');$('#tri_volet_logo img').attr('src','./assets/logos/logo_menu_bouygues.svg');setupFavicon('./assets/favicon/favicon_bouygues.ico')
break;case "nacarat":$('#GUI-logo').attr('src','assets/logos/logo_nacarat.svg');$('#GUI-logo').addClass('nacarat');$('#tri_volet_logo img').attr('src','./assets/logos/logo_menu_nacarat.svg');setupFavicon('./assets/favicon/favicon_nacarat.ico')
break;case "caimmo":$('#GUI-logo').attr('src','assets/logos/logo_caimmo.svg');$('#GUI-logo').addClass('caimmo');$('#tri_volet_logo img').attr('src','./assets/logos/logo_menu_caimmo.svg');setupFavicon('./assets/favicon/favicon_caimmo.ico')
break;case "angelotti":$('#GUI-logo').attr('src','assets/logos/logo_angelotti.png');$('#GUI-logo').addClass('angelotti');$('#tri_volet_logo img').attr('src','./assets/logos/logo_menu_angelotti.jpg');setupFavicon('./assets/favicon/favicon_angelotti.ico')
break;case "eiffage":$('#GUI-logo').attr('src','assets/logos/logo_eiffage.svg');$('#GUI-logo').addClass('eiffage');$('#tri_volet_logo img').attr('src','./assets/logos/logo_menu_eiffage.svg');setupFavicon('./assets/favicon/favicon_eiffage.png')
break;case "marignan":$('#GUI-logo').attr('src','assets/logos/logo_marignan.svg');$('#GUI-logo').addClass('marignan');$('#tri_volet_logo img').attr('src','./assets/logos/logo_menu_marignan.svg');setupFavicon('./assets/favicon/favicon_marignan.png')
break;case "gambetta":$('#GUI-logo').attr('src','assets/logos/logo_gambetta.svg');$('#GUI-logo').addClass('gambetta');$('#tri_volet_logo img').attr('src','./assets/logos/logo_menu_gambetta.svg');setupFavicon('./assets/favicon/favicon_gambetta.png')
break;case "lp_promotion":$('#GUI-logo').attr('src','assets/logos/logo_lp_promotion.svg');$('#GUI-logo').addClass('lp_promotion');$('#tri_volet_logo img').attr('src','./assets/logos/logo_menu_lp_promotion.svg');setupFavicon('./assets/favicon/favicon_lp_promotion.ico')
break;case "st_agne":$('#GUI-logo').attr('src','assets/logos/logo_st_agne.svg');$('#GUI-logo').addClass('st_agne');$('#tri_volet_logo img').attr('src','./assets/logos/logo_menu_st_agne.svg');setupFavicon('./assets/favicon/favicon_st_agne.png')
break}}
function setupFavicon(url){var link=document.querySelector("link[rel~='icon']");if(!link){link=document.createElement('link');link.rel='icon';document.head.appendChild(link)}
link.href=url}
function initModeNuit(){}
function initBoussoleButtons(){$('#boussole_right').on('mousedown',function(){if(zoomValue!=zoomMin){zoomValue=zoomMin;ApplyZoomRange(zoomValue)}
startRotation("right")});$('#boussole_right').on('mouseout mouseup',function(){stopRotation()});$('#boussole_left').on('mousedown',function(){if(zoomValue!=zoomMin){zoomValue=zoomMin;ApplyZoomRange(zoomValue)}
startRotation("left")});$('#boussole_left').on('mouseout mouseup',function(){stopRotation()});$('#zoom_out').on('click',function(){zoomValue-=pasZoom;ApplyZoomRange(zoomValue)});$('#zoom_in').on('click',function(){zoomValue+=pasZoom;ApplyZoomRange(zoomValue)})}
let rotation_interval=null;function startRotation(direction){if(direction=="left"){if(rotation_interval==null){rotation_interval=window.setInterval(function(){imagePlus()},40)}}else if(direction=="right"){if(rotation_interval==null){rotation_interval=window.setInterval(function(){imageMoins()},40)}}}
function stopRotation(){clearInterval(rotation_interval);rotation_interval=null}
function testElementInFlux(element){retour=!1;flux.forEach(function(fluxElement){if(typeof fluxElement[0]!=='undefined'||fluxElement[0]!==null){if(fluxElement[0]==element)retour=!0}
if(typeof fluxElement.NUMERO!=='undefined'||fluxElement.NUMERO!==null){if(fluxElement.NUMERO==element)retour=!0}
if(typeof fluxElement.reference!=='undefined'||fluxElement.reference!==null){if(contains(fluxElement.reference,fluxPrefixNom+element))retour=fluxElement}});return retour}
function gestionFlux(){if(fluxLoaded){lots.forEach(function($lot_courant){flux_add_lot=testElementInFlux($lot_courant.nom);if(flux_add_lot){$lot_courant.social=!1;if(typeof flux_add_lot!=='boolean'){$lot_courant.etage=flux_add_lot.etage;$lot_courant.type=flux_add_lot.type;$lot_courant.surface=flux_add_lot.surface;$lot_courant.prix=flux_add_lot.prix;$lot_courant.orientation=flux_add_lot.orientation}}else{$lot_courant.social=!0}})}}
var swiper_bandeau_droit=null;function initBandeauDroit(){let etages_niveau=[];for(element in etages){let etage=etages[element];if(etage.etage_type=="NIVEAU"){etages_niveau.push(etage)}}
let str="";for(let i=etages_niveau.length-1;i>=0;i--){let etage=etages_niveau[i];if(etage.etage_type=="NIVEAU"){str+='<div id="bt_'+etage.prefix+'"  class="swiper-slide">'+etage.nom_affichage+'</div>'}}
$('#GUI-menu .swiper-wrapper').html(str);swiper_bandeau_droit=new Swiper("#mySwiper",{slidesPerView:"auto",direction:"vertical",freeMode:!0,mousewheel:!0,resistanceRatio:0,scrollbar:{el:".swiper-scrollbar",hide:!1,draggable:!0,},navigation:{disabledClass:'myswiper-button-disabled',nextEl:'.myswiper-button-next',prevEl:'.myswiper-button-prev',},});(is_btn_fullscreen_visible)?$('#bt_FULLSCREEN').css('display','flex'):$('#bt_FULLSCREEN').css('display','none');(is_btn_ensoleillement_visible)?$('#bt_SUN').css('display','flex'):$('#bt_SUN').css('display','none');(is_btn_mode_nuit_visible)?$('#bt_NIGHT').css('display','flex'):$('#bt_NIGHT').css('display','none');(is_btn_in_situ_visible)?$('#bt_IN_SITU').css('display','flex'):$('#bt_IN_SITU').css('display','none');(is_btn_haut_visible)?$('#bt_HAUT').css('display','flex'):$('#bt_HAUT').css('display','none');(is_btn_bas_visible)?$('#bt_BAS').css('display','flex'):$('#bt_BAS').css('display','none')}
function rotateBoussole(angle){$('#cadran').attr('transform','rotate('+angle+' 0 0)')}
function initBandeauDroitButtons(){if(is_btn_ensoleillement_visible){let sun_popup=$('#GUI-sun');let sun_popup_mobile=$('#GUI-sun-mobile');initEnsoleillement();$('#bt_SUN').hover(function(){if(!$('#bt_SUN').hasClass('actif')){$('#bt_SUN').addClass('actif')}},function(){if(!displayIsMobile){if(sun_popup.css('display')=="none")$('#bt_SUN').removeClass('actif');}else{if(sun_popup_mobile.css('display')=="none")$('#bt_SUN').removeClass('actif');}});$('#big_container').on('click',function(event){if(!displayIsMobile){if((sun_popup.css('display')!=="none")&&($(event.target).parents('#bt_SUN').length==0)){if(($(event.target).parents('#GUI-sun').length==0)&&(event.target.id!=="bt_SUN")){sun_popup.css({'display':'none','opacity':'0'})}else{sun_popup.css('display','block');sun_popup.animate({'opacity':'1'},300)}}}else{if((sun_popup_mobile.css('display')!=="none")&&($(event.target).parents('#bt_SUN').length==0)){console.log("Click mobile + not bt_SUN");if(($(event.target).parents('#GUI-sun-mobile').length==0)&&(event.target.id!=="bt_SUN")){console.log("ouvert");sun_popup_mobile.css({'display':'none','opacity':'0'})}else{console.log("fermé");sun_popup_mobile.css('display','block');sun_popup_mobile.animate({'opacity':'1'},300)}}}});$('#bt_SUN').on('click',function(event){console.log("-- click bt_SUN");tri_close_volet();let checkbox_nuit=document.getElementById('mode_nuit');checkbox_nuit.checked=!1;checkbox_nuit.disabled=!0;$('#bt_NIGHT').css('display','none');if(!displayIsMobile){if(sun_popup.css('display')=='none'){sun_popup.css('display','block');sun_popup.animate({'opacity':'1'},300)}}else{if(sun_popup_mobile.css('display')=='none'){sun_popup_mobile.css('display','block');sun_popup_mobile.animate({'opacity':'1'},300)}}
let selected_description=ensoleillement_description[ensoleillement_selection.month];currentEtage=selected_description.prefix+"_"+selected_description.month+"_"+selected_description.hours[ensoleillement_selection.hour];setEtageButton(currentEtage);displayEnsoleillement(ensoleillement_selection)})}
if(is_btn_mode_nuit_visible){if((currentEtage=="HAUT")||(currentEtage=="BAS")){document.getElementById('mode_nuit').disabled=!1;$('#bt_NIGHT').css('display','flex')}else{document.getElementById('mode_nuit').disabled=!0;$('#bt_NIGHT').css('display','none')}
$('#mode_nuit').on('click',function(event){tri_close_volet();let checkbox_nuit=document.getElementById('mode_nuit');if(checkbox_nuit.checked){is_mode_nuit_active=!0;currentEtage+="_NUIT";let etage=etages[currentEtage];currentPlan=null;hideAxo();if(!etage.LD_loaded){launchLoadingLD(currentEtage)}else{changeEtage(currentEtage)}
if(panelOpen)hidePanel();}else{currentEtage=currentEtage.split('_')[0];$('#bt_'+currentEtage).trigger('click')}})}
if(is_btn_in_situ_visible){$('#bt_IN_SITU').hover(function(){if(!$('#bt_IN_SITU').hasClass('actif')){$('#bt_IN_SITU').addClass('actif')}},function(){if(etages_type[etages_noms.indexOf(currentEtage)]!=="IN_SITU")
$('#bt_IN_SITU').removeClass('actif');});$('#bt_IN_SITU').on('click',function(event){console.log("-- click bt_IN_SITU");tri_close_volet();let checkbox_nuit=document.getElementById('mode_nuit');checkbox_nuit.checked=!1;checkbox_nuit.disabled=!0;$('#bt_NIGHT').css('display','none');let in_situ_index=0;etages_type.forEach(function(type,type_index){if(type==="IN_SITU")in_situ_index=type_index});currentEtage=etages_noms[in_situ_index];setEtageButton(currentEtage);hideAxo();if(!etages[currentEtage].LD_loaded){launchLoadingLD(currentEtage)}else{changeEtage(currentEtage)}
if(panelOpen)hidePanel();})}
for(element in etages){let etage=etages[element];if((etage.etage_type.includes("NIVEAU"))||(etage.etage_type.includes("BAS"))||(etage.etage_type.includes("HAUT"))){$('#bt_'+etage.prefix).hover(function(){if(!$('#bt_'+etage.prefix).hasClass('actif')){$('#bt_'+etage.prefix).addClass('actif')}},function(){if(etage.prefix!=currentEtage)$('#bt_'+etage.prefix).removeClass('actif');});$('#bt_'+etage.prefix+', #bt_'+etage.prefix+'-mobile').on('click',function(event,option){if((option==null)||(option=='undefined')){tri_close_volet()}
let etage_radical=$(this).attr('id');etage_radical=etage_radical.substring(3);etage_radical=etage_radical.split("-")[0];let etage=etages[etage_radical];let checkbox_nuit=document.getElementById('mode_nuit');checkbox_nuit.checked=!1;if(is_btn_mode_nuit_visible){if((etage_radical=="HAUT")||(etage_radical=="BAS")){checkbox_nuit.disabled=!1;$('#bt_NIGHT').css('display','flex')}else{checkbox_nuit.disabled=!0;$('#bt_NIGHT').css('display','none')}}
currentPlan=null;currentEtage=etage_radical;setEtageButton(currentEtage);hideAxo();animateElements(currentFrame);stage.update();if(!etage.LD_loaded){launchLoadingLD(currentEtage)}else{changeEtage(currentEtage)}
if(panelOpen)hidePanel();})}}}
function setEtageButton(etage_selected){let etage_selected_type=etages_type[etages_noms.indexOf(etage_selected)];if(etage_selected_type==="SOLEIL"){if(!$("#bt_SUN").hasClass('actif'))$("#bt_SUN").addClass('actif');}else{if($("#bt_SUN").hasClass('actif'))$("#bt_SUN").removeClass('actif');}
if(etage_selected_type==="IN_SITU"){if(!$("#bt_IN_SITU").hasClass('actif'))$("#bt_IN_SITU").addClass('actif');}else{if($("#bt_IN_SITU").hasClass('actif'))$("#bt_IN_SITU").removeClass('actif');}
etages_noms.forEach(function(etage_name,etage_index){if(etage_name==etage_selected){if(!$("#bt_"+etage_name).hasClass('actif'))$("#bt_"+etage_name).addClass('actif');}else{if($("#bt_"+etage_name).hasClass('actif'))$("#bt_"+etage_name).removeClass('actif');}})}
function initEnsoleillement(){console.log("-- defineEnsoleillementChoices");ensoleillement_description=[];let soleil_indexes=[];let soleil_names=[];etages_type.forEach(function(type,index_type){if(type==="SOLEIL")soleil_indexes.push(index_type);});soleil_indexes.forEach(function(index){soleil_names.push(etages_noms[index])});soleil_names.forEach(function(name){let name_split=name.split('_');let prefix=name_split.slice(0,-2).join('_');let month=name_split[name_split.length-2];let hour=name_split[name_split.length-1];let month_found=!1;if(ensoleillement_description.length==0){ensoleillement_description.push({'month':month,'hours':[hour],'prefix':prefix})}else{ensoleillement_description.forEach(function(elem){if(elem.month==month){month_found=!0;elem.hours.push(hour)}});if(!month_found){ensoleillement_description.push({'month':month,'hours':[hour],'prefix':prefix})}}});$('#GUI-sun a.close').on('click',function(){$('#GUI-sun').animate({'opacity':'0'},300,function(){$('#GUI-sun').css('display','none')})});$('#GUI-sun .btns-wrapper a').on('click',function(){$('#GUI-sun .btns-wrapper a').removeClass('active')
$(this).addClass('active');ensoleillement_selection.month=parseInt($(this).attr('id').substring(6))-1;displayEnsoleillement(ensoleillement_selection)});$("#sun-range").slider({value:2,min:1,max:3,slide:function(event,ui){$("#sun-rotation").css("transform","translateX(-8px)rotate(-"+convertSliderValueToDegrees(ui.value)+"deg)")},change:function(event,ui){ensoleillement_selection.hour=parseInt($("#sun-range").slider("value"))-1;displayEnsoleillement(ensoleillement_selection)}});$("#sun-rotation").val("$"+$("#superficie-rangexx").slider("value"));$("#sun-rotation").css("transform","translateX(-8px) rotate(-"+convertSliderValueToDegrees($("#sun-range").slider("value"))+"deg)");$('#GUI-sun-mobile .btns-wrapper-mobile a').on('click',function(){$('#GUI-sun-mobile .btns-wrapper-mobile a').removeClass('active')
$(this).addClass('active');ensoleillement_selection.month=parseInt($(this).attr('id').substring(6))-1;displayEnsoleillement(ensoleillement_selection)});$("#sun-range-mobile").slider({orientation:'vertical',value:2,min:1,max:3,slide:function(event,ui){},change:function(event,ui){let val=parseInt($("#sun-range-mobile").slider("value"));ensoleillement_selection.hour=val-1;displayEnsoleillement(ensoleillement_selection)}})}
function displayEnsoleillement(values){let current_description=ensoleillement_description[values.month];currentEtage=current_description.prefix+"_"+current_description.month+"_"+current_description.hours[values.hour];hideAxo();if(!etages[currentEtage].LD_loaded){launchLoadingLD(currentEtage)}else{changeEtage(currentEtage)}
if(panelOpen)hidePanel();}
function convertSliderValueToDegrees(value){let degree=0;switch(value){case 1:degree=150;break;case 2:degree=90;break;case 3:degree=30;break}
return degree}
function initGalerie(){$('#galerie_container_open_button').on('click',function(){let galerie_bigcontainer=document.getElementById('galerie_bigcontainer');if(!galerie_bigcontainer.classList.contains('show'))galerie_bigcontainer.classList.add('show');let galerie_container_open_button=document.getElementById('galerie_container_open_button');if(!galerie_container_open_button.classList.contains('actif'))galerie_container_open_button.classList.add('actif');if(is_video_active)closeVideo();});$('#galerie_bigcontainer').on('click',function(e){if(e.target!==this)return;closeVideoAndGalerie()});$('#galerie_close').on('click',function(e){closeVideoAndGalerie()});var galerie_elements=$('img','#galerie_container').toArray();galerie_elements.forEach(function(elem){$(elem).on('click touch',function(el){$('#galerie_lightbox').removeClass('hide').addClass('unhide');galerie_swiper.slideTo(galerie_elements.indexOf(elem),20);galerie_swiper.update()});$('.galerie_swiper_wrapper').append("<div class=\"galerie_swiper_slide\"><div class=\"galerie_swiper_slide_contain\"><img src=\""+elem.src+"\" class=\"galerie_slide_img\" /></div></div>")});$('img','.galerie_swiper_wrapper').toArray().forEach(function(elem){$(elem).on('click',function(el){$('#galerie_lightbox').removeClass('unhide').addClass('hide')})});var galerie_swiper=new Swiper(('.galerie_swiper_container'),{speed:400,slidesPerView:1,spaceBetween:0,containerModifierClass:'galerie_swiper_container',wrapperClass:'galerie_swiper_wrapper',slideClass:'galerie_swiper_slide',nested:!0,effect:'slide',navigation:{nextEl:'.galerie-button-next',prevEl:'.galerie-button-prev',}})}
let video_orbitale=null;function initVideo(){video_orbitale=document.getElementById('video_orbitale');video_orbitale.volume=0.5;$('#video_container_open_button').on('click',function(){let video_bigcontainer=document.getElementById('video_bigcontainer');if(!video_bigcontainer.classList.contains('show'))video_bigcontainer.classList.add('show');let video_container_open_button=document.getElementById('video_container_open_button');if(!video_container_open_button.classList.contains('actif'))video_container_open_button.classList.add('actif');if(is_galerie_active)closeGalerie();window.setTimeout(function(){video_orbitale.play().then(()=>{console.log("Vidéo lancée")}).catch((error)=>{console.log("Erreur au lancement de la vidéo")})})});$('#video_bigcontainer').on('click',function(e){if(e.target!==this)return;closeVideoAndGalerie()})}
function resetVideo(){video_orbitale.pause();video_orbitale.currentTime=0}
function closeVideoAndGalerie(){closeGalerie();closeVideo()}
function closeVideo(){let video_bigcontainer=document.getElementById('video_bigcontainer');if(is_video_active&&video_bigcontainer.classList.contains('show')){video_bigcontainer.classList.remove('show');resetVideo();let video_container_open_button=document.getElementById('video_container_open_button');if(video_container_open_button.classList.contains('actif'))video_container_open_button.classList.remove('actif');}}
function closeGalerie(){let galerie_bigcontainer=document.getElementById('galerie_bigcontainer');let galerie_lightbox=document.getElementById('galerie_lightbox');if(is_galerie_active&&galerie_bigcontainer.classList.contains('show')){galerie_bigcontainer.classList.remove('show');if(galerie_lightbox.classList.contains('unhide')){galerie_lightbox.classList.remove('unhide');galerie_lightbox.classList.add('hide')}
let galerie_container_open_button=document.getElementById('galerie_container_open_button');if(galerie_container_open_button.classList.contains('actif'))galerie_container_open_button.classList.remove('actif');}}
function addEvents(){lots.forEach(function(elem){if(elem.social){social.push(elem.cell)}else{createPuce(elem);if(affichageNomLots)addApptNames(elem);if(elem.cat==="std"){if(elem.type!="ROOM"){$(elem.cell).on('click touchend',function(event){clicked_object=this.name;actionOnCell(elem.cell)})}else{$(elem.cell).on('click touchend',function(event){clicked_object=this.name;openLightboxCellule(elem)})}}else{}}});if((hideSocialArea)&&(isSocial)){for(var i=0;i<social.length;i++){social[i].visible=!1}}
imgPlan=document.getElementById("planImg");addOrbitaleGestureControler();animateElements(currentFrame);if(theTouchisEnabled())createjs.Touch.enable(stage,!1,!0);lots.forEach(function(elem){if(elem.hidden)elem.cell.visible=!1})}
function createPuce(elem){var thePuce;if(elem.cat=="nozone"){thePuce=new addNewPictoNoZone("puce_"+elem.nom,elem)}else if(elem.type=="ROOM"){thePuce=new addNewPictoPicture("puce_"+elem.nom,elem)}else{thePuce=new addNewPuce("puce_"+elem.nom,elem)}
switch(elem.niveau){case "R0":exportRoot.Axo.Axo_R0.addChild(thePuce);elem.puce=exportRoot.Axo.Axo_R0.getChildByName("puce_"+elem.nom);break;case "R1":exportRoot.Axo.Axo_R1.addChild(thePuce);elem.puce=exportRoot.Axo.Axo_R1.getChildByName("puce_"+elem.nom);break;case "R2":exportRoot.Axo.Axo_R2.addChild(thePuce);elem.puce=exportRoot.Axo.Axo_R2.getChildByName("puce_"+elem.nom);break;case "R3":exportRoot.Axo.Axo_R3.addChild(thePuce);elem.puce=exportRoot.Axo.Axo_R3.getChildByName("puce_"+elem.nom);break;case "R4":exportRoot.Axo.Axo_R4.addChild(thePuce);elem.puce=exportRoot.Axo.Axo_R4.getChildByName("puce_"+elem.nom);break;case "R5":exportRoot.Axo.Axo_R5.addChild(thePuce);elem.puce=exportRoot.Axo.Axo_R5.getChildByName("puce_"+elem.nom);break;case "R6":exportRoot.Axo.Axo_R6.addChild(thePuce);elem.puce=exportRoot.Axo.Axo_R6.getChildByName("puce_"+elem.nom);break;case "R7":exportRoot.Axo.Axo_R7.addChild(thePuce);elem.puce=exportRoot.Axo.Axo_R7.getChildByName("puce_"+elem.nom);break;case "R8":exportRoot.Axo.Axo_R8.addChild(thePuce);elem.puce=exportRoot.Axo.Axo_R8.getChildByName("puce_"+elem.nom);break;case "R9":exportRoot.Axo.Axo_R9.addChild(thePuce);elem.puce=exportRoot.Axo.Axo_R9.getChildByName("puce_"+elem.nom);break}
elem.puce.alpha=1.0;stage.update()}
function addNewPuce(name,elem){var puce=new lib.puce();puce.set({name:name,x:elem.coord[currentFrame].x,y:elem.coord[currentFrame].y,cursor:"pointer"});$(puce).on('click touch',function(event){clicked_object=elem.cell.name;actionOnCell(elem.cell)});return puce}
function addNewPictoPicture(name,elem){var puce=new lib.picto_picture();puce.set({name:name,x:elem.coord[currentFrame].x,y:elem.coord[currentFrame].y,cursor:"pointer"});$(puce).on('click touch',function(event){clicked_object=elem.cell.name;openLightboxCellule(elem)});return puce}
function addNewPictoNoZone(name,elem){var puce=new lib.picto_maison();puce.set({name:name,x:elem.coord[currentFrame].x,y:elem.coord[currentFrame].y,cursor:"pointer"});$(puce).on('click touch',function(event){clicked_object=elem.puce.name;actionOnCell(elem.puce)});return puce}
function addApptNames(elem){elem.appt=new createjs.Container();elem.appt.set({});var bg1=new createjs.Shape();bg1.graphics.beginFill("white").drawRoundRect(-puceSize.width/2,-puceSize.height/2,puceSize.width,puceSize.height,roundedCorner,roundedCorner,roundedCorner,roundedCorner);if(elem.type==="T1"||(elem.type==="T1D")||(elem.type==="T1B"))
bg1.graphics.beginStroke(colorT1).drawRoundRect(-puceSize.width/2,-puceSize.height/2,puceSize.width,puceSize.height,roundedCorner,roundedCorner,roundedCorner,roundedCorner);if(elem.type==="T2"||(elem.type==="T2D")||(elem.type==="T2B"))
bg1.graphics.beginStroke(colorT2).drawRoundRect(-puceSize.width/2,-puceSize.height/2,puceSize.width,puceSize.height,roundedCorner,roundedCorner,roundedCorner,roundedCorner);if((elem.type==="T3")||(elem.type==="T3D")||(elem.type==="T3B"))
bg1.graphics.beginStroke(colorT3).drawRoundRect(-puceSize.width/2,-puceSize.height/2,puceSize.width,puceSize.height,roundedCorner,roundedCorner,roundedCorner,roundedCorner);if((elem.type==="T4")||(elem.type==="T4D")||(elem.type==="T4B"))
bg1.graphics.beginStroke(colorT4).drawRoundRect(-puceSize.width/2,-puceSize.height/2,puceSize.width,puceSize.height,roundedCorner,roundedCorner,roundedCorner,roundedCorner);if((elem.type==="T5")||(elem.type==="T5D")||(elem.type==="T5B"))
bg1.graphics.beginStroke(colorT5).drawRoundRect(-puceSize.width/2,-puceSize.height/2,puceSize.width,puceSize.height,roundedCorner,roundedCorner,roundedCorner,roundedCorner);if((elem.type==="T6")||(elem.type==="T6D")||(elem.type==="T6B"))
bg1.graphics.beginStroke(colorT6).drawRoundRect(-puceSize.width/2,-puceSize.height/2,puceSize.width,puceSize.height,roundedCorner,roundedCorner,roundedCorner,roundedCorner);if((elem.type==="ROOM"))
bg1.graphics.beginStroke(colorROOM).drawRoundRect(-puceSize.width/2,-puceSize.height/2,puceSize.width,puceSize.height,roundedCorner,roundedCorner,roundedCorner,roundedCorner);var text=new createjs.Text(elem.nom,'bold 16px GoboldThin');if((elem.type==="T1")||(elem.type==="T1D")||(elem.type==="T1B"))
text.set({color:colorT1,textAlign:"center",textBaseline:"middle",x:0,y:0});if((elem.type==="T2")||(elem.type==="T2D")||(elem.type==="T2B"))
text.set({color:colorT2,textAlign:"center",textBaseline:"middle",x:0,y:0});if((elem.type==="T3")||(elem.type==="T3D")||(elem.type==="T3B"))
text.set({color:colorT3,textAlign:"center",textBaseline:"middle",x:0,y:0});if((elem.type==="T4")||(elem.type==="T4D")||(elem.type==="T4B"))
text.set({color:colorT4,textAlign:"center",textBaseline:"middle",x:0,y:0});if((elem.type==="T5")||(elem.type==="T5D")||(elem.type==="T5B"))
text.set({color:colorT5,textAlign:"center",textBaseline:"middle",x:0,y:0});if((elem.type==="T6")||(elem.type==="T6D")||(elem.type==="T6B"))
text.set({color:colorT6,textAlign:"center",textBaseline:"middle",x:0,y:0});if((elem.type==="ROOM"))
text.set({color:colorROOM,textAlign:"center",textBaseline:"middle",x:0,y:0});elem.appt.set({name:"appt"+elem.nom,x:elem.coord[currentFrame].x+decalPuce.x+offsetPanel.x,y:elem.coord[currentFrame].y-decalPuce.y/4+offsetPanel.y});bg1.alpha=0.4;text.alpha=1.0;elem.appt.addChild(bg1,text);exportRoot.Axo["Axo_"+elem.niveau].addChild(elem.appt);elem.appt=exportRoot.Axo["Axo_"+elem.niveau].getChildByName("appt"+elem.nom)}
function animateElements(frame_number){for(let etage_name in etages){etages[etage_name].easeljs_anim.gotoAndStop(frame_number)}
lots.forEach(function(elem){rotatePlans(elem);if(!elem.social){elem.puce.set({x:elem.coord[currentFrame].x+decalPuce.x+offsetPanel.x,y:elem.coord[currentFrame].y+3*(decalPuce.y/4)+offsetPanel.y});if(affichageNomLots)elem.appt.set({x:elem.coord[currentFrame].x+decalPuce.x+offsetPanel.x,y:elem.coord[currentFrame].y-decalPuce.y/4+offsetPanel.y})}});if(panelOpen){lots.forEach(rotateLabel)}}
function launchLoadingLD(etage_string){showLoader();if(firstLoad){exportRoot=new lib.Maquette360_Canvas();stage=new createjs.Stage(canvas);stage.addChild(exportRoot);console.log("setInterval resizeCanvas");window.setInterval(function(){resizeCanvas()},50);initPanel();defineVariables();if(fluxLotsActif){gestionFlux()}
if(isTriActif){tri_init(lots)}
if(getFavorisList().length>0){$('#fav_button_open_volet').css('display','flex')}else{$('#fav_button_open_volet').css('display','none')}
stage.update();stage.enableMouseOver()}
let etage=etages[etage_string];loadLD(etage.listLD,etage.prefix,exportRoot.Axo["Axo_"+etage.prefix][etage.prefix])}
function loadLD(theImages,etage_name,elem){nbrLoaded=0;for(var imageToLoad=(currentFrame);imageToLoad<(currentFrame+theImages.length);imageToLoad++){var imageIndex=imageToLoad;if(imageToLoad<imageMin)imageIndex=(imageMax+1)+imageToLoad;if(imageToLoad>imageMax)imageIndex=imageToLoad-(imageMax+1);var image=new Image();image.src=theImages[imageIndex].src;var theObject=elem;var loadImage=new showloaded();loadImage.image=image;loadImage.element=theObject;loadImage.frame=imageIndex;loadImage.preload()}}
var percent=0;function showloaded(){this.image;this.element;this.frame;this.preload=function(){var thisObject=this;$(this.image).on('load',function(){thisObject.load()})};this.load=function(){this.element.gotoAndStop(this.frame);percent=Math.round((nbrLoaded/imageMax)*100);progressLoader(percent);let loader_elliptical_path=elliptical_arc(359*percent/100+0.9);$('#path_test').attr('d',loader_elliptical_path);nbrLoaded++;let bitmap=new createjs.Bitmap(this.image.src);this.element.getChildAt(0).image=bitmap.image;if(nbrLoaded==imageMax+1){if(firstLoad){firstLoad=!1;addEvents()}
etages[currentEtage].LD_loaded=!0;hideAxo();changeEtage(currentEtage);stage.update();eraseLoader()}
this.element.gotoAndStop(currentFrame);resizeImagesIn(exportRoot.Axo["Axo_"+currentEtage][currentEtage]);stage.update()}}
function loadingHD(){$('#console').html("loadingHD : "+currentEtage+"<br>");if(etages[currentEtage].LD_loaded){loadHD()}}
var loadHDFirstload=!0;function splitImageNameAndIndex(name){let index=name.lastIndexOf('_');return[name.substr(0,index),name.substr(index+1)]}
let loadHDQueue=[];function loadHD(){if(currentFrame>imageMax)currentFrame=imageMin;else if(currentFrame<imageMin)currentFrame=imageMax;if((!etages[currentEtage].listHD[currentFrame].loaded)&&(!etages[currentEtage].listHD[currentFrame].preloaded)){etages[currentEtage].listHD[currentFrame].preloaded=!0;let image=etages[currentEtage].listHD[currentFrame].preload;image.src=etages[currentEtage].listHD[currentFrame].src;interruptLoadHDQueue(currentEtage,currentFrame);loadHDQueue.push({'etage':currentEtage,'frame':currentFrame,'image':image});$(image).on('load',function(){let loaded_image=image.src;loaded_image=loaded_image.split('/');loaded_image=loaded_image[loaded_image.length-1];loaded_image=loaded_image.split('.');loaded_image=loaded_image[0];let loaded_image_name=splitImageNameAndIndex(loaded_image);let loaded_image_etage_prefix=loaded_image_name[0];let loaded_image_index=loaded_image_name[1];loaded_image_index=parseInt(loaded_image_index);etages[loaded_image_etage_prefix].listHD[loaded_image_index].loaded=!0;removeFromLoadHDQueue(loaded_image_etage_prefix,loaded_image_index)})}else if(etages[currentEtage].listHD[currentFrame].loaded){let operate=''+exportRoot.Axo["Axo_"+etages[currentEtage].prefix][etages[currentEtage].prefix].getChildAt(0).image!="undefined";$('#console').append('HD marked loaded : '+currentFrame+'<br>'+"operate : "+operate+'<br>');if(operate){let str=exportRoot.Axo["Axo_"+etages[currentEtage].prefix][etages[currentEtage].prefix].getChildAt(0).image.src;if(contains(str,'images\/LD')&&contains(str,pad(currentFrame,3))){exportRoot.Axo["Axo_"+etages[currentEtage].prefix][etages[currentEtage].prefix].getChildAt(0).image.src=etages[currentEtage].listHD[currentFrame].src;let tmp=etages[currentEtage].listHD[currentFrame].src.split('/')}else{let tmp=str.split('/')}}}else{$('#console').append("sheisse "+currentFrame+"<br>");$('#console').append("loaded : "+etages[currentEtage].listHD[currentFrame].loaded+"<br>");$('#console').append("preloaded : "+etages[currentEtage].listHD[currentFrame].preloaded)}}
function displayLoadHDQueue(){let str="currframe : "+currentFrame+'<br>';str+="isProladed : "+etages[currentEtage].listHD[currentFrame].preloaded+'<br>';loadHDQueue.forEach(function(elem){str+=elem.etage+' - '+elem.frame+'<br>'});$('#loadHDQueueViewer').html(str)}
function removeFromLoadHDQueue(_etage,_frame){loadHDQueue.forEach(function(elem,index){loadHDQueue=[...loadHDQueue.reduce((map,obj)=>((obj.etage===_etage)&&(obj.frame==_frame))?map:map.set(obj,obj),new Map()).values()]})}
function interruptLoadHDQueue(_etage,_frame){loadHDQueue.forEach(function(elem,index){if((elem.etage===_etage)&&(elem.frame==_frame)){}else{elem.image.src="";$(elem.image).off('load');etages[elem.etage].listHD[elem.frame].preloaded=!1}});loadHDQueue=[]}
var onImgLoad=function(selector,callback){$(selector).each(function(){if(this.complete||$(this).height()>0){callback.apply(this)}else{$(this).on('load',function(){callback.apply(this)})}})};function hideAxo(){for(let etage_name in etages){if(etage_name!==currentEtage){let etage=etages[etage_name];etage.easeljs_elem.visible=!1}}}
function changeEtage(etage_name){resizeImagesIn(exportRoot.Axo["Axo_"+etage_name][etage_name]);exportRoot.Axo["Axo_"+etage_name].visible=!0}
function resizeImagesIn(elem){let operate=(''+elem.getChildAt(0).image)!="undefined";if(operate){let str=elem.getChildAt(0).image.src;if(contains(str,'images\/LD')){elem.getChildAt(0).scaleX=canvasSize.width/imageLD.width+0.001;elem.getChildAt(0).scaleY=canvasSize.height/imageLD.height}else{elem.getChildAt(0).scaleX=canvasSize.width/imageHD.width+0.001;elem.getChildAt(0).scaleY=canvasSize.height/imageHD.height}}else{}}
function movePanel(elem,pos,offset){if(panelOpen){elem.x=pos.x+offset.x+arrangePanel.x;elem.y=pos.y+offset.y+arrangePanel.y}}
function rotatePlans(elem){if(elem.cat!=="nozone"){if(elem.niveau===currentEtage){elem.cell.AnimPlanBT.gotoAndStop(currentFrame);elem.cell.AnimPlanBT.children.forEach(function(e){changeGraphicPlan(e,elem)});if(elem.hidden)elem.cell.visible=!1}}}
function changeGraphicPlan(e,elem){if((elem.type=="T1")||(elem.type=="T1D")||(elem.type=="T1B")){if(e.graphics._fill!=null)e.graphics._fill.style=colorT1}else if((elem.type=="T2")||(elem.type=="T2D")||(elem.type=="T2B")){if(e.graphics._fill!=null)e.graphics._fill.style=colorT2}else if((elem.type=="T3")||(elem.type=="T3D")||(elem.type=="T3B")){if(e.graphics._fill!=null)e.graphics._fill.style=colorT3}else if((elem.type=="T4")||(elem.type=="T4D")||(elem.type=="T4B")){if(e.graphics._fill!=null)e.graphics._fill.style=colorT4}else if((elem.type=="T5")||(elem.type=="T5D")||(elem.type=="T5B")){if(e.graphics._fill!=null)e.graphics._fill.style=colorT5}else if((elem.type=="T6")||(elem.type=="T6D")||(elem.type=="T6B")){if(e.graphics._fill!=null)e.graphics._fill.style=colorT6}else if(elem.type=="ROOM"){if(e.graphics._fill!=null)e.graphics._fill.style=colorROOM}
if(elem.cat!=="nozone"){if(elem.type!="ROOM"){if(currentPlan!=null&&currentPlan===elem.cell){if(e.graphics._fill!=null){e.alpha=0.7}else{if((hide_panel_on_mobile)&&displayIsMobile){e.graphics._stroke.style="#666666";e.graphics._strokeStyle.width=4}
e.alpha=1.0}
if((hide_panel_on_mobile)&&displayIsMobile){elem.puce.children[1].children[0].graphics._fill.style="#ffffff";elem.puce.children[1].children[1].graphics._fill.style="#797e83"}}else{if(e.graphics._fill!=null){e.alpha=0.5}else{if((hide_panel_on_mobile)&&displayIsMobile){e.graphics._stroke.style="#FFFFFF";e.graphics._strokeStyle.width=1}
e.alpha=0.0}
if((hide_panel_on_mobile)&&displayIsMobile){elem.puce.children[1].children[0].graphics._fill.style="#B6B9BE";elem.puce.children[1].children[1].graphics._fill.style="#ffffff"}}}else{if(currentPlan!=null&&currentPlan===elem.cell){if(e.graphics._fill!=null){e.alpha=0.2}else{e.alpha=0.6}}else{if(e.graphics._fill!=null){e.alpha=0.1}else{e.alpha=0.0}}}}
if(elem.social){if(e.graphics._fill!=null){e.graphics._fill.style=colorSocial;e.alpha=0.9}}
if(elem.hidden)elem.cell.visible=!1}
function rotateLabel(elem){if(elem.cat!=="nozone"){if(elem.cell===currentPlan){movePanel(panel_lib,elem.coord[currentFrame],offsetPanel)}
elem.cell.visible=!elem.hidden}else{if(elem.puce===currentPlan)movePanel(panel_lib,elem.coord[currentFrame],offsetPanelNoZone);}}
function hidePuce(elem){if(!elem.social){elem.puce.alpha=1.0}}
function searchTypeLot(nom){var retour="T4";lots.forEach(function(item){if(item.nom==nom){retour=item.type}});return retour}
function searchLotByNom(nom){var retour=null;lots.forEach(function(item){if(item.nom==nom){retour=item}});return retour}
function searchLotById(id){var retour=null;lots.forEach(function(item){if(item.id==id){retour=item}});return retour}
function searchLotIndexByNom(nom){var retour=[];lots.forEach(function(item,index){if(item.nom==nom){retour.push(index)}});return retour}
function actionOnCell(panel){if(panelOpen){if(currentPlan==panel){hidePanel();currentPlan=null;isPointerMoving=!1}else{panel_lib.alpha=0.0;currentPlan=panel;lots.forEach(majDesignationPanel);panel_lib.alpha=1.0;isPointerMoving=!0}}else{currentPlan=panel;if(!((hide_panel_on_mobile)&&(displayIsMobile))){panelOpen=!0;lots.forEach(majDesignationPanel);panel_lib.alpha=1.0}else{let lot=getLotFromCurrentPanel(currentPlan);if(lot!==null){initFicheRecap(lot.nom);$('.back-results').hide();$('#tri_menu_gauche').addClass('open');$('#tri_menu_gauche').removeClass('step01').addClass('step02')}}
isPointerMoving=!0}
animateElements(currentFrame)}
function getLotFromCurrentPanel(currentPanel){let resultat=null;lots.forEach(function(lot){if(lot.cell===currentPanel){resultat=lot}});return resultat}
function initPanel(){exportRoot.Axo.panel=new lib.panel();exportRoot.Axo.panel.set({name:"panel",parent:exportRoot.Axo,x:0,y:0});exportRoot.Axo.addChild(exportRoot.Axo.panel);panel_lib=exportRoot.Axo.panel;panel_lib.alpha=0.0;$(panel_lib).on('click touch',function(event){clicked_object=this.name});$(panel_lib.panel_bt_fiche).on('click touch',function(event){clicked_object=this.name;let currentLotPanelName=panel_lib.panel_numlot_prix.panel_numlot_txt.text;initFicheRecap(currentLotPanelName);$('.back-results').hide();$('#tri_menu_gauche').addClass('open');$('#tri_menu_gauche').removeClass('step01').addClass('step02');event.stopPropagation()});$(panel_lib.panel_bt_fermer).on('click touch',function(event){clicked_object=this.name;event.stopPropagation()});$(panel_lib.panel_bt_coeur).on('click touch',function(event){clicked_object=this.name;let currentLotPanelName=panel_lib.panel_numlot_prix.panel_numlot_txt.text;let current_fav_state=getFavori(currentLotPanelName);current_fav_state=!current_fav_state;setFavori(currentLotPanelName,current_fav_state);event.stopPropagation()});$(panel_lib.panel_bt_coeur).hover(function(){panel_lib.panel_bt_coeur.gotoAndStop(1)},function(){let currentLotPanelName=panel_lib.panel_numlot_prix.panel_numlot_txt.text;let current_fav_state=getFavori(currentLotPanelName);if(current_fav_state){panel_lib.panel_bt_coeur.gotoAndStop(1)}else{panel_lib.panel_bt_coeur.gotoAndStop(0)}})}
function displayPanel(panel){panelOpen=!0;currentPlan=panel;lots.forEach(majDesignationPanel);panel_lib.alpha=1.0;isPointerMoving=!0}
function majDesignationPanel(elem){if(!elem.social){if((elem.cell===currentPlan)||((elem.cat==="nozone")&&(elem.puce===currentPlan))){if(elem.prix!=null){panel_lib.panel_numlot_prix.set({y:-195});panel_lib.panel_numlot_prix.panel_prix_txt.visible=!0;panel_lib.panel_numlot_prix.panel_prix_txt.text=new Intl.NumberFormat('fr-FR',{style:'currency',currency:'EUR',maximumFractionDigits:0}).format(elem.prix)}else{panel_lib.panel_numlot_prix.set({y:-184});panel_lib.panel_numlot_prix.panel_prix_txt.visible=!1}
if(elem.orientation!=null){panel_lib.panel_orientation.visible=!0;if(elem.orientation.length>10){panel_lib.panel_orientation.panel_orientation_txt.font="14px 'Montserrat'";panel_lib.panel_orientation.panel_orientation_txt.lineWidth=150;panel_lib.panel_orientation.panel_orientation_txt.setTransform(99,-5)}else{panel_lib.panel_orientation.panel_orientation_txt.font="15px 'Montserrat'";panel_lib.panel_orientation.panel_orientation_txt.lineWidth=95;panel_lib.panel_orientation.panel_orientation_txt.setTransform(99,-6)}
panel_lib.panel_orientation.panel_orientation_txt.text=elem.orientation}else{panel_lib.panel_orientation.visible=!1}
switch(elem.type){case "T1":case "T1D":case "T1B":panel_lib.panel_typo_carre.panel_typo_couleur.graphics._fill.style=colorT1;break;case "T2":case "T2D":case "T2B":panel_lib.panel_typo_carre.panel_typo_couleur.graphics._fill.style=colorT2;break;case "T3":case "T3D":case "T3B":panel_lib.panel_typo_carre.panel_typo_couleur.graphics._fill.style=colorT3;break;case "T4":case "T4D":case "T4B":panel_lib.panel_typo_carre.panel_typo_couleur.graphics._fill.style=colorT4;break;case "T5":case "T5D":case "T5B":panel_lib.panel_typo_carre.panel_typo_couleur.graphics._fill.style=colorT5;break;case "T6":case "T6D":case "T6B":panel_lib.panel_typo_carre.panel_typo_couleur.graphics._fill.style=colorT6;break}
if(!applicationFromLocalStorage){if(elem.pdf==null||elem.pdf===""){panel_lib.panel_plan.panel_plan_image.image.src=pdv_pas_de_plan}else{panel_lib.panel_plan.panel_plan_image.image.src=pdv_vignette_folder+elem.pdf+".jpg"}}else{panel_lib.panel_plan.panel_plan_image.image.src="";panel_lib.panel_plan.panel_plan_image.visible=!1;panel_lib.panel_plan.panel_plan_background.visible=!1}
if(elem.favori==0){panel_lib.panel_bt_coeur.gotoAndStop(0)}else{panel_lib.panel_bt_coeur.gotoAndStop(1)}
panel_lib.panel_typo_carre.panel_typo_txt.text=elem.type;panel_lib.panel_numlot_prix.panel_numlot_txt.text=elem.nom;panel_lib.panel_superficie.panel_superficie_txt.text=elem.surface+" M²";panel_lib.panel_etage.panel_etage_txt.text=getEtageDisplayName(elem.niveau.toString());if(isMobile()){panel_lib.scaleX=1.8;panel_lib.scaleY=1.8}
elem.puce.alpha=0.0}else{elem.puce.alpha=1.0}}
if((elem.hidden)&&(elem.cat!=="nozone"))elem.cell.visible=!1}
function hidePanel(){lots.forEach(hidePuce);panelOpen=!1;$('#planImg').attr('src','assets/blank.png');if(typeof panel_lib==='undefined'){console.info('Current Panel is undefined')}else{panel_lib.alpha=0.0}
rotatePlans(lots)}
function hidePDF(){lots.forEach(hidePuce);panelOpen=!1;$('#planImg').attr('src','assets/blank.png');if(typeof exportRoot.Axo.AnimPanel==='undefined'){}else{exportRoot.Axo.AnimPanel.alpha=0.0}
if(affPDF)$(exportRoot.Axo.AnimPanel.btPDF).unbind('click touchend');rotatePlans(lots)}
var loader_first_display=!0;function showLoader(){$("#GUI-loader-container").css({'visibility':'visible','opacity':'1'})}
function progressLoader(percent){document.getElementById('loader_text').textContent=percent+" %"}
function eraseLoader(){if(loader_first_display){loader_first_display=!loader_first_display;$('#GUI-loader-container').css('background-color','rgba(255, 255, 255, 0)');$('#GUI-loader-container').css('background-image','unset')}
$("#GUI-loader-container").animate({'opacity':0},250,function(){$("#GUI-loader-container").css({'visibility':'hidden'});document.getElementById('loader_text').textContent=0+" %";let loader_elliptical_path=elliptical_arc(359*0/100+0.9);$('#path_test').attr('d',loader_elliptical_path)})}
function closeLightBox(){$('#GUI-lightbox').animate({'opacity':'0'},600,function(){$('#GUI-lightbox').css('display','none')})}
var cellule_swiper=null;var cellule_swipe_index=0;function initLightboxCellule(){cellule_swiper=new Swiper(('.cellule_swiper_container'),{speed:400,slidesPerView:1,spaceBetween:0,containerModifierClass:'cellule_swiper_container',wrapperClass:'cellule_swiper_wrapper',slideClass:'cellule_swiper_slide',nested:!0,effect:'slide',navigation:{nextEl:'.cellule-button-next',prevEl:'.cellule-button-prev',},pagination:{el:'.swiper-pagination',type:'bullets',},});cellule_swiper.on('update',function(){cellule_swiper.slideTo(cellule_swipe_index)})}
function openLightboxCellule(elem,index){let cellule_list=elem.cellule.split(' ');cellule_list.forEach(function(elem,index){cellule_list[index]=elem.trim()});$('.cellule_swiper_wrapper').html("");cellule_swiper.slideTo(0);document.getElementById('lightbox-cellule-img').src="cellules/"+cellule_list[0]+".jpg";cellule_list.forEach(function(elem,index_cellule){$('.cellule_swiper_wrapper').append('<div class="cellule_swiper_slide"><div class="cellule_swiper_slide_contain"><img src="cellules/'+cellule_list[index_cellule]+'.jpg" class="cellule_slide_img" /></div></div>')});cellule_swipe_index=index;cellule_swiper.update();document.getElementById('lightbox-num-lot').innerHTML=elem.nom;$('#GUI-lightbox #lightbox-modal-cellule').css('display','block');$('#GUI-lightbox #lightbox-modal-aerien').css('display','none');$('#GUI-lightbox').css('display','block');$('#GUI-lightbox').animate({'opacity':'1'},600)}
var aerien_swiper=null;var aerien_swipe_index=0;function initLightboxAerien(){aerien_swiper=new Swiper(('.aerien_swiper_container'),{speed:400,slidesPerView:1,spaceBetween:0,containerModifierClass:'aerien_swiper_container',wrapperClass:'aerien_swiper_wrapper',slideClass:'aerien_swiper_slide',nested:!0,effect:'slide',navigation:{nextEl:'.aerien-button-next',prevEl:'.aerien-button-prev',},pagination:{el:'.swiper-pagination',type:'bullets',},});aerien_swiper.on('update',function(){aerien_swiper.slideTo(aerien_swipe_index)})}
function openLightboxAerien(elem,index){let aerien_list=elem.aerien.split(' ');aerien_list.forEach(function(elem,index){aerien_list[index]=elem.trim()});$('.aerien_swiper_wrapper').html("");aerien_swiper.slideTo(0);document.getElementById('lightbox-aerien-img').src="panos_aerien/"+aerien_list[0]+".jpg";aerien_list.forEach(function(elem,index){$('.aerien_swiper_wrapper').append('<div class="aerien_swiper_slide"><div class="aerien_swiper_slide_contain"><img src="panos_aerien/'+aerien_list[index]+'.jpg" class="aerien_slide_img" /></div></div>')});aerien_swipe_index=index;aerien_swiper.update();$('#GUI-lightbox #lightbox-modal-cellule').css('display','none');$('#GUI-lightbox #lightbox-modal-aerien').css('display','block');$('#GUI-lightbox').css('display','block');$('#GUI-lightbox').animate({'opacity':'1'},600)}
var isCursorSlider=!1;var isPointerMoving=!1;function addOrbitaleGestureControler(){var theAxoScreen=exportRoot.Axo;originAxo.x=theAxoScreen.x;originAxo.y=theAxoScreen.y;var actif=!1;var justactif=!1;var xpos;var sensib_scale=0.05;var scaleMultiplier=0.001;var firstScaling=!1;var scale=0;var firstScale=0;var distOne=newVector2D(0,0);var distTwo=newVector2D(0,0);var nombreDoigtsGesture=0;var fingersID=new Array();$('#canvas').on("pointerdown",function(event){nombreDoigtsGesture++;actif=!0;justactif=!0;isPointerMoving=!1;fingersID.push(event.originalEvent.pointerId)});$('#canvas').on("pointermove",function(event){if(nombreDoigtsGesture==1){if(justactif){justactif=!1;xpos=event.pageX;clickedPos.x=event.pageX;clickedPos.y=event.pageY;movedAxo.x=exportRoot.Axo.x;movedAxo.y=exportRoot.Axo.y}
if(actif){if(isCursorSlider){moveCursor(event.pageX)}else if(event.pageX<(xpos-40)){xpos=event.pageX;imagePlus();isPointerMoving=!0}else if(event.pageX>(xpos+40)){xpos=event.pageX;imageMoins();isPointerMoving=!0}
moveScreen(event.pageX,event.pageY)}}
if(nombreDoigtsGesture==2){isPointerMoving=!0;if(event.originalEvent.pointerId==fingersID[0]){distOne=newVector2D(event.pageX,event.pageY)}
if(event.originalEvent.pointerId==fingersID[1]){distTwo=newVector2D(event.pageX,event.pageY);oldScale=scale;scale=calculateDistance(distOne,distTwo)*scaleMultiplier-firstScale;if(!firstScaling){firstScaling=!0;firstScale=scale}else if(scale.toFixed(2)>sensib_scale){zoomPlus()}else if(scale.toFixed(2)<-sensib_scale){zoomMoins()}}}});$('#canvas').on("pointerup pointerout",function(event){nombreDoigtsGesture--;var tempFingersID=new Array();fingersID.forEach(function(element){if(element!=event.originalEvent.pointerId){tempFingersID.push(element)}});fingersID=tempFingersID;if(fingersID.length==1){firstScaling=!1;firstScale=0}
if(fingersID.length==0){nombreDoigtsGesture=0;actif=!1;justactif=!1;firstScaling=!1;firstScale=0}});$('#canvas').on("pointerup",function(event){clicked_object="canvas";setTimeout(function(){if(!isPointerMoving&&panelOpen&&(clicked_object!="panel"&&clicked_object!="panel_bt_coeur"&&clicked_object!="panel_bt_fiche")){hidePanel();let tmp_name=currentPlan.name.split('_')[1];let tmp_lot=null;if(tmp_name!=='undefined')tmp_lot=searchLotByNom(tmp_name);if((tmp_lot==null)||(tmp_lot.cat!=='nozone')){currentPlan.AnimPlanBT.children.forEach(function(e){changeGraphicPlan(e,currentPlan)})}
currentPlan=null}},100)})}
function moveScreen(mousePosX,mousePosY){var theAxoScreen=exportRoot.Axo;if(zoomValue>1.0&&deplace){theAxoScreen.x=movedAxo.x+(mousePosX-clickedPos.x);theAxoScreen.y=movedAxo.y+(mousePosY-clickedPos.y)}}
function imagePlus(){if(zoomValue<=1.05||!deplace){if(cw){currentFrame=currentFrame+1;if(currentFrame>imageMax){currentFrame=imageMin}}else{currentFrame--;if(currentFrame<imageMin){currentFrame=imageMax}}
if(cwRose){roseAngle=roseStartAngle+(currentFrame*pasAngle)}else{roseAngle=roseStartAngle+(currentFrame*(-1*pasAngle))}
loadingHD();rotateBoussole(roseAngle);animateElements(currentFrame)}}
function imageMoins(){if(zoomValue<=1.05||!deplace){if(cw){currentFrame=currentFrame-1;if(currentFrame<imageMin){currentFrame=imageMax}}else{currentFrame++;if(currentFrame>imageMax){currentFrame=imageMin}}
if(cwRose){roseAngle=roseStartAngle+(currentFrame*pasAngle)}else{roseAngle=roseStartAngle+(currentFrame*(-1*pasAngle))}
loadingHD();rotateBoussole(roseAngle);animateElements(currentFrame)}}
function displayConsoleFrameInfo(){let str="currentFrame :"+currentFrame;str+="<br>";if(etages[currentEtage].listHD[currentFrame].loaded){str+="HD loaded: true"}else{str+="HD loaded: false"}
$('#console').html(str)}
function zoomPlus(){pinchValue+=0.025;zoomValue=pinchValue;ApplyZoomRange(pinchValue)}
function zoomMoins(){pinchValue-=0.025;zoomValue=pinchValue;ApplyZoomRange(pinchValue)}
function ApplyZoomRange(value){if(value<zoomMin){value=zoomMin}
if(value>zoomMax){value=zoomMax}
zoomValue=value;pinchValue=parseFloat(value);exportRoot.Axo.scaleX=value;exportRoot.Axo.scaleY=value;if(zoomValue<=1.0){exportRoot.Axo.x=originAxo.x;exportRoot.Axo.y=originAxo.y}}
function tri_init(liste_lots_appli){tri_lots_clean=[...liste_lots_appli.reduce((map,obj)=>map.has(obj.nom)?map:map.set(obj.nom,obj),new Map()).values()];tri_lots_clean=[...tri_lots_clean.reduce((map,obj)=>(obj.social)?map:map.set(obj.nom,obj),new Map()).values()];tri_lots_clean=[...tri_lots_clean.reduce((map,obj)=>(obj.type)==="ROOM"?map:map.set(obj.nom,obj),new Map()).values()];var tri_liste_surface=[...tri_lots_clean.reduce((map,obj)=>isNaN(obj.surface)?map:map.set(obj.nom,obj),new Map()).values()];tri_liste_surface=tri_liste_surface.sort(function(a,b){return a.surface-b.surface});tri_is_surface_defined=(tri_liste_surface.length>0);if(tri_is_surface_defined){tri_surface_min=Math.floor(tri_liste_surface[0].surface);tri_surface_max=Math.ceil(tri_liste_surface[tri_liste_surface.length-1].surface)}else{console.error("/!\ Aucune surface valide")}
tri_liste_typos=[...tri_lots_clean.reduce((map,obj)=>map.has(obj.type)?map:map.set(obj.type,{type:obj.type}),new Map()).values()];tri_liste_typos=tri_liste_typos.sort(function(a,b){return a.type.localeCompare(b.type)});tri_liste_typos_occurences=tri_lots_clean.reduce((map,obj)=>map.set(obj.type,(map.get(obj.type)||0)+1),new Map());tri_liste_specific=new Array();[...tri_lots_clean.reduce((map,obj)=>((obj.specific.trim()==="")||(map.has(obj.specific)))?map:map.set(obj.specific,obj.specific),new Map()).values()].forEach(function(elem){elem.split(" ").forEach(function(el){if(!tri_liste_specific.find(value=>value===el)){tri_liste_specific.push(el)}})});tri_liste_specific=tri_liste_specific.sort(function(a,b){return a.localeCompare(b)});tri_liste_exterieur=new Array();[...tri_lots_clean.reduce((map,obj)=>((obj.exterieur.trim()==="")||(map.has(obj.exterieur)))?map:map.set(obj.exterieur,obj.exterieur),new Map()).values()].forEach(function(elem){elem.split(" ").forEach(function(el){if(!tri_liste_exterieur.find(value=>value===el)){tri_liste_exterieur.push(el)}})});tri_liste_exterieur=tri_liste_exterieur.sort(function(a,b){return a.localeCompare(b)});tri_lots_favoris=new Array();tri_init_interface()}
function tri_init_interface(){$('#tri_button_open_volet').on('click',function(){$('#tri_menu_gauche').removeClass('step02').addClass('step01');$('#tri_menu_gauche').addClass('open');closeVideoAndGalerie()});$('#tri_button_close_volet').on('click',function(){tri_close_volet()});$('.search-submit input').on('click',function(){tri_check_research();if((tri_selection_actuel!==null)&&(tri_selection_actuel.length>0)){$('.view-tabs').show();tri_refresh_grille_resultats();displayEtapeGrille()}});$('#step02 a.back-search').on('click',function(){$('#tri_menu_gauche').removeClass('step02').addClass('step01');$('.view-tabs').show();$('.label-fiche').hide()});$('.view-tabs a').on('click',function(){$('.view-tabs a').removeClass('active');$(this).addClass('active')});$('.view-tabs a.view-grid, .view-nav a.back-results').on('click',function(){$('#results-view').removeClass('active-view-list').removeClass('active-view-fiche').addClass('active-view-grid');$('.view-tabs span.label').html('Affichage en vue grille');$('.view-tabs a.view-list').removeClass('active');$('.view-tabs a.view-grid').addClass('active');$('.view-tabs').show();$('.label-fiche').hide()});$('.view-tabs a.view-list').on('click',function(){$('#results-view').removeClass('active-view-grid').removeClass('active-view-fiche').addClass('active-view-list');$('.view-tabs span.label').html('Affichage en vue liste')});$("#superficie-range").slider({range:!0,min:0,max:500,values:[24,500],change:superficie_slide_handler,});$("#price-range").slider({range:!0,min:0,max:400,values:[45,400],change:prix_slide_handler,});$('.search-by-superficie').css('display','block');if(is_price_visible)$('.search-by-price').css('display','block');if(tri_liste_specific.length==0)$('#search-specific-group').css('display','none');$('#tri_nom_residence').html('<strong>'+nom_residence+'</strong>');$('#tri_subnom_residence').html('<strong>'+subnom_residence+'</strong>');let str="";tri_liste_typos.forEach(function(elem){str+='<span>';str+='<input type="checkbox" name="search-by-type" id="type-'+elem.type+'"></input>';str+='<label for="type-'+elem.type+'"><span class="type">'+elem.type+'</span><span>Disponible '+tri_liste_typos_occurences.get(elem.type)+' lots</span></label>';str+='</span>'});$('#typologie_container').html(str);str="";tri_liste_specific.forEach(function(elem){str+='<span>';str+='<input type="checkbox" name="search-by-specific" id="'+elem+'" ';str+='>';if(elem.toLowerCase()=="brs"){str+='<label for="'+elem+'">'+elem+'</label>'}else{str+='<label for="'+elem+'">'+capitalize(elem)+'</label>'}
str+='</span>'});$('#specific_container').html(str);str="";tri_liste_exterieur.forEach(function(elem){str+='<span>';str+='<input type="checkbox" name="search-by-exterieur" id="'+elem+'" ';str+='>';str+='<label for="'+elem+'">'+capitalize(elem)+'</label>';str+='</span>'});$('#exterieur_container').html(str);tri_liste_typos.forEach(function(elem){$("#type-"+elem.type).click(function(){let type_name=$(this).attr('id').substring(5);if($(this).is("[checked]")){$(this).removeAttr("checked");tri_liste_typos_selected=tri_liste_typos_selected.filter(el=>el!==type_name)}else{$(this).attr("checked","checked");tri_liste_typos_selected.push(type_name)}
tri_check_research()})});tri_liste_specific.forEach(function(elem){$("#"+elem).click(function(){let spec_name=$(this).attr('id');if($(this).is("[checked]")){$(this).removeAttr("checked");tri_liste_specific_selected=tri_liste_specific_selected.filter(el=>el!==spec_name)}else{$(this).attr("checked","checked");tri_liste_specific_selected.push(spec_name)}
tri_check_research()})});tri_liste_exterieur.forEach(function(elem){$("#"+elem).click(function(){let ext_name=$(this).attr('id');if($(this).is("[checked]")){$(this).removeAttr("checked");tri_liste_exterieurs_selected=tri_liste_exterieurs_selected.filter(el=>el!==ext_name)}else{$(this).attr("checked","checked");tri_liste_exterieurs_selected.push(ext_name)}
tri_check_research()})});tri_init_input_text_search()}
function tri_check_research(){let result=[];let one_typo_selected=!1;for(let typo_name in tri_liste_typos_selected){one_typo_selected=one_typo_selected||tri_liste_typos_selected[typo_name]};if(!one_typo_selected){$('#btn_lancer_recherche').attr("value","Sélectionnez une typologie");tri_selection_actuel=null}else{tri_selection=new Array();tri_liste_typos_selected.forEach(function(typo){tri_selection=tri_selection.concat([...tri_lots_clean.reduce((map,obj)=>(obj.type!==typo)?map:map.set(obj.nom,obj),new Map()).values()])});if(tri_liste_specific_selected.length>0){let tri_selection_tmp=new Array();tri_liste_specific_selected.forEach(function(specific){tri_selection_tmp=tri_selection_tmp.concat([...tri_selection.reduce((map,obj)=>(!obj.specific.includes(specific))?map:map.set(obj.nom,obj),new Map()).values()])});tri_selection=tri_selection_tmp;tri_selection=[...tri_selection.reduce((map,obj)=>(map.has(obj.nom))?map:map.set(obj.nom,obj),new Map()).values()]}
if(tri_liste_exterieurs_selected.length>0){let tri_selection_tmp=new Array();tri_liste_exterieurs_selected.forEach(function(exterieur){tri_selection_tmp=tri_selection_tmp.concat([...tri_selection.reduce((map,obj)=>(!obj.exterieur.includes(exterieur))?map:map.set(obj.nom,obj),new Map()).values()])});tri_selection=tri_selection_tmp;tri_selection=[...tri_selection.reduce((map,obj)=>(map.has(obj.nom))?map:map.set(obj.nom,obj),new Map()).values()]}
let superficie_min=superficie_selected[0];let superficie_max=superficie_selected[1];if(superficie_max>100)superficie_max=2000;tri_selection=[...tri_selection.reduce((map,obj)=>((!isNaN(parseInt(obj.surface)))&&(parseInt(obj.surface)>=superficie_min)&&(parseInt(obj.surface)<=superficie_max))?map.set(obj.nom,obj):map,new Map()).values()];let prix_min=prix_selected[0];let prix_max=prix_selected[1];if(prix_max==400000)prix_max=2000000;tri_selection=[...tri_selection.reduce((map,obj)=>((isNaN(parseInt(obj.prix)))||((parseInt(obj.prix)>=prix_min)&&(parseInt(obj.prix)<=prix_max)))?map.set(obj.nom,obj):map,new Map()).values()];tri_selection=tri_selection.sort(function(a,b){return a.nom.localeCompare(b.nom)});if(tri_selection.length==0){$('#btn_lancer_recherche').attr("value","Aucun logement correspondant")}else if(tri_selection.length==1){$('#btn_lancer_recherche').attr("value","Afficher le logement")}else{$('#btn_lancer_recherche').attr("value","Afficher les "+tri_selection.length+" logements")}
tri_selection_actuel=tri_selection}}
function tri_init_input_text_search(){$('#tri_input_search_picto').on('click',function(){tri_selection_actuel=tri_proceed_input_text_search();if(tri_selection_actuel.length==0){$('#tri_input_search').val('');$('#tri_input_search').attr('placeholder','Pas de correspondance trouvée...')}else{tri_refresh_grille_resultats();displayEtapeGrille()}});$('#tri_input_search').on('keydown',function(e){if(e.key=="Enter"){tri_selection_actuel=tri_proceed_input_text_search();if(tri_selection_actuel.length==0){$('#tri_input_search').val('');$('#tri_input_search').attr('placeholder','Pas de correspondance trouvée...')}else{tri_refresh_grille_resultats();displayEtapeGrille()}}})}
function tri_proceed_input_text_search(){let saisie=$('#tri_input_search').val();let tmp_tri_selection=new Array();if((saisie!=="")&&(saisie!=="undefined")){saisie=normalizeString(saisie);tmp_tri_selection=[...tri_lots_clean.reduce((map,obj)=>(!normalizeString(obj.nom).includes(saisie))?map:map.set(obj.nom,obj),new Map()).values()]}
return tmp_tri_selection}
function tri_refresh_grille_resultats(){if(tri_selection_actuel.length>1){$('#nombre_resultats').html(tri_selection_actuel.length+" logements")}else{$('#nombre_resultats').html(tri_selection_actuel.length+" logement")}
let str_grille="";let str_liste="";str_liste='<table width="100%" cellpadding="0" cellspacing="0">';str_liste+='<tr>';str_liste+='<th></th>';str_liste+='<th></th>';str_liste+='<th>Superficie</th>';str_liste+='<th>&Eacute;tage</th>';if(is_price_visible)str_liste+='<th>Prix</th>';str_liste+='<th></th>';str_liste+='</tr>';tri_selection_actuel.forEach(function(result_elem,result_index){let etage_name=getEtageDisplayName(result_elem.niveau);if(result_index==0){str_grille+='<div class="results-grid-view-item mb" id="results-grid-view-01">'}else{str_grille+='<div class="results-grid-view-item mb">'}
str_grille+='<div class="results-grid-view-item-visu">';if(result_elem.pdf==null||result_elem.pdf===""){str_grille+='<img src="'+pdv_pas_de_plan+'" width="100%" alt="">'}else{str_grille+='<img src="PDV/Vignettes/LD/'+result_elem.nom+'.jpg" width="100%" alt="">'}
str_grille+='</div>';str_grille+='<div class="results-grid-view-item-content">';str_grille+='<div class="block-title">';if(result_elem.type.length<=2){str_grille+='<span class="type type-'+result_elem.type+'">'+result_elem.type+'</span>'}else{str_grille+='<span class="type type-'+result_elem.type+' large">'+result_elem.type+'</span>'}
str_grille+='<p class="title"><strong>'+result_elem.nom+'</strong>';if(is_price_visible)str_grille+='<br>'+new Intl.NumberFormat('fr-FR',{style:'currency',currency:'EUR',maximumFractionDigits:0}).format(result_elem.prix);str_grille+='</p>';str_grille+='</div>';str_grille+='<p class="detail">';str_grille+='Superficie : '+result_elem.surface+'m2<br>';str_grille+='Étage : '+etage_name+'<br>';str_grille+='</p>';str_grille+='<a href="#" class="view-fiche" id="fiche_'+result_elem.nom+'">Fiche détaillée</a>';str_grille+='</div>';str_grille+='</div>';str_liste+='<tr>';str_liste+='<td class="type type-'+result_elem.type+'">'+result_elem.type+'</td>';str_liste+='<td><strong>'+result_elem.nom+'</strong></td>';str_liste+='<td>'+result_elem.surface+' M²</td>';str_liste+='<td>'+etage_name+'</td>';if(is_price_visible)str_liste+='<td>'+new Intl.NumberFormat('fr-FR',{style:'currency',currency:'EUR',maximumFractionDigits:0}).format(result_elem.prix);+'</td>';str_liste+='<td class="action"><a href="#" class="view-fiche" id="fiche_'+result_elem.nom+'">Fiche</a></td>';str_liste+='</tr>'});$('#results-grid-view').html(str_grille);$('#results-list-view').html(str_liste);$('.view-fiche').on('click',function(){console.log($(this));let tmp_nom_lot=$(this).attr("id").substring(6);console.log(".view-fiche lot : "+tmp_nom_lot);initFicheRecap(tmp_nom_lot);let lot_choisi=searchResultByName(lots,tmp_nom_lot);if(lot_choisi.niveau!==currentEtage){$('#bt_'+lot_choisi.niveau).trigger('click',"not_close_volet")}
window.setTimeout(function(){$(lot_choisi.cell).trigger('click')},100)});if(!displayIsMobile){$('#tri_volet_content_step02_grid').attr('class','xCustomScroll');$('#tri_volet_content_step02_list').attr('class','xCustomScroll')}}
function displayEtapeGrille(){$('#results-view').removeClass('active-view-list').removeClass('active-view-fiche').addClass('active-view-grid');$('.view-tabs span.label').html('Affichage en vue grille');$('.view-tabs a.view-list').removeClass('active');$('.view-tabs a.view-grid').addClass('active');$('.back-results').show();$('.label-fiche').hide();$('#tri_menu_gauche').removeClass('step01').addClass('step02')}
var fiche_swiper=null;function initFicheRecap(nom_lot){console.log("-- initFicheRecap");let tmp_result=searchResultByName(lots,nom_lot);if(tmp_result!=null){$('#fiche_titre_lot').html(tmp_result.nom);let tmp_str="";tmp_str+='<span class="type type-'+tmp_result.type+'">'+tmp_result.type+'</span>';tmp_str+='<p>';tmp_str+='<strong>'+tmp_result.nom+'</strong>';if(tmp_result.prix!==null)tmp_str+='<br>'+new Intl.NumberFormat('fr-FR',{style:'currency',currency:'EUR',maximumFractionDigits:0}).format(tmp_result.prix);tmp_str+='</p>';$('#result_fiche_header').html(tmp_str);tmp_str="";tmp_str+="Appartement ";switch(tmp_result.type){case 'T1':tmp_str+="1 pièce";break;case 'T1D':tmp_str+="1 pièces duplex";break;case 'T1B':tmp_str+="1 pièces bis";break;case 'T2':tmp_str+="2 pièces";break;case 'T2D':tmp_str+="2 pièces duplex";break;case 'T2B':tmp_str+="2 pièces bis";break;case 'T3':tmp_str+="3 pièces";break;case 'T3D':tmp_str+="3 pièces duplex";break;case 'T3B':tmp_str+="3 pièces bis";break;case 'T4':tmp_str+="4 pièces";break;case 'T4D':tmp_str+="4 pièces duplex";break;case 'T4B':tmp_str+="4 pièces bis";break;case 'T5':tmp_str+="5 pièces";break;case 'T5D':tmp_str+="5 pièces duplex";break;case 'T5B':tmp_str+="5 pièces bis";break;case 'T6':tmp_str+="6 pièces";break;case 'T6D':tmp_str+="6 pièces duplex";break;case 'T6B':tmp_str+="6 pièces bis";break;case 'T7':tmp_str+="7 pièces";break;case 'T7D':tmp_str+="7 pièces duplex";break;case 'T8':tmp_str+="8 pièces";break;case 'T8D':tmp_str+="8 pièces duplex";break;case 'T9':tmp_str+="9 pièces";break;case 'T9D':tmp_str+="9 pièces duplex";break}
if(tmp_result.batiment!==null){tmp_str+="<br>";tmp_str+="Bâtiment "+tmp_result.batiment}
$('#result_fiche_detail_typo').html(tmp_str);tmp_str="";tmp_str+="<strong>Surface :</strong> "+tmp_result.surface+" m²<br>";if((tmp_result.surface_annexe!==null)&&(tmp_result.surface_annexe!=="xx.xx"))
tmp_str+="<strong>Surface annexe :</strong> "+tmp_result.surface_annexe+" m²<br>";tmp_str+="<strong>Étage :</strong> "+getEtageDisplayName(tmp_result.niveau)+"<br>";if(tmp_result.orientation!==null)
tmp_str+="<strong>Orientation :</strong> "+tmp_result.orientation+"<br>";if(tmp_result.nbre_chambres!==null){if(tmp_result.nbre_chambres!==0)tmp_str+="<strong>Chambres :</strong> "+tmp_result.nbre_chambres+"<br>"}else{switch(tmp_result.type){case 'T2':case 'T2D':case 'T2B':tmp_str+="<strong>Chambres :</strong> 1<br>";break;case 'T3':case 'T3D':case 'T3B':tmp_str+="<strong>Chambres :</strong> 2<br>";break;case 'T4':case 'T4D':case 'T4B':tmp_str+="<strong>Chambres :</strong> 3<br>";break;case 'T5':case 'T5D':case 'T5B':tmp_str+="<strong>Chambres :</strong> 4<br>";break;case 'T6':case 'T6D':case 'T6B':tmp_str+="<strong>Chambres :</strong> 5<br>";break;case 'T7':case 'T7D':case 'T7B':tmp_str+="<strong>Chambres :</strong> 6<br>";break;case 'T8':case 'T8D':case 'T8B':tmp_str+="<strong>Chambres :</strong> 7<br>";break;case 'T9':case 'T9D':case 'T9B':tmp_str+="<strong>Chambres :</strong> 8<br>";break}}
if((tmp_result.nbre_sdb!==null)&&(tmp_result.nbre_sdb>0))
tmp_str+="<strong>Salles de bain/d\'eau :</strong> "+tmp_result.nbre_sdb+"<br>";if((tmp_result.specific!==null)&&(tmp_result.specific.trim()!=="")){tmp_str+="<strong>Particularité :</strong> ";let spec_result=tmp_result.specific.trim().split(" ");spec_result.forEach(function(spec,specindex){if(spec.toLowerCase()=="brs"){tmp_str+=spec}else{tmp_str+=capitalize(spec)}
if(specindex<spec_result.length-1)tmp_str+=", "});tmp_str+="<br>"}
$('#result_fiche_detail_divers').html(tmp_str);$('#fiche_cellule_axo').css({'visibility':'hidden','z-index':'1'});initFicheResultButtons(tmp_result);if(tri_fiche_recap_first_display){fiche_swiper=new Swiper(('#fiche_swiper_container'),{speed:400,slidesPerView:1,spaceBetween:0,nested:!1,effect:'slide',centeredSlides:!0,direction:'horizontal',navigation:{nextEl:'.fiche-button-next',prevEl:'.fiche-button-prev',},});tri_fiche_recap_first_display=!1}
initFicheResultSlideShow(tmp_result);$('#results-view').removeClass('active-view-list').removeClass('active-view-grid').addClass('active-view-fiche');$('.view-tabs span.label').html('Affichage en vue grille');$('.view-tabs').hide();$('.label-fiche').show();window.setTimeout(function(){$('#fiche_swiper_container').css('display','block');$('#fiche_swiper_container').animate({'opacity':'1'},500)},300)}}
function initFicheResultButtons(elem){let tmp_str="";if((elem.pdf!==null)&&(elem.pdf!=="")){tmp_str+='<li id="result_fiche_btn_telecharger">';tmp_str+='<a href="#"><span class="picto"><svg viewBox="0 0 384 512" width="17" height="22" class="fill-dark">';tmp_str+='<path d="M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"/>';tmp_str+='</svg></span>';tmp_str+='<span class="label">Télécharger la fiche</span>';tmp_str+='</a></li>'}
if((elem.cellule!==null)&&(elem.cellule!=="")){tmp_str+='<li id="result_fiche_btn_plan_3D">';tmp_str+='<a href="#"><span class="picto"><svg viewBox="0 0 512 512" width="22" height="22" class="fill-dark">';tmp_str+='<path d="M239.1 6.3l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V129.3c0-20-12.4-37.9-31.1-44.9l-208-78C262 2.2 250 2.2 239.1 6.3zM256 68.4l192 72v1.1l-192 78-192-78v-1.1l192-72zm32 356V275.5l160-65v133.9l-160 80z"/>';tmp_str+='</svg></span>';tmp_str+='<span class="label">Plan 3D</span>';tmp_str+='</a></li>'}
if((elem.cellule_axo!==null)&&(elem.cellule_axo!=="")){tmp_str+='<li id="result_fiche_btn_plan_axo">';tmp_str+='<a href="#"><span class="picto"><svg viewBox="0 0 512 512" width="22" height="22" class="fill-dark">';tmp_str+='<path d="M239.1 6.3l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V129.3c0-20-12.4-37.9-31.1-44.9l-208-78C262 2.2 250 2.2 239.1 6.3zM256 68.4l192 72v1.1l-192 78-192-78v-1.1l192-72zm32 356V275.5l160-65v133.9l-160 80z"/>';tmp_str+='</svg></span>';tmp_str+='<span class="label">Plan 3D 360°</span>';tmp_str+='</a></li>'}
if((elem.aerien!==null)&&(elem.aerien!=="")){tmp_str+='<li id="result_fiche_btn_vue_etage">';tmp_str+='<a href="#"><span class="picto"><svg viewBox="0 0 448 512" width="19" height="22" class="fill-dark">';tmp_str+='<path d="M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"/>';tmp_str+='</svg></span>';tmp_str+='<span class="label">Vue d\'étage</span>';tmp_str+='</a></li>'}
if((elem.aerien360!==null)&&(elem.aerien360!=="")){console.log('HERE');tmp_str+='<li id="result_fiche_btn_vue_etage_360">';tmp_str+='<a href="#"><span class="picto"><svg viewBox="0 0 448 512" width="19" height="22" class="fill-dark">';tmp_str+='<path d="M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"/>';tmp_str+='</svg></span>';tmp_str+='<span class="label">Vue d\'étage 360°</span>';tmp_str+='</a></li>'}
if((elem.visite360!==null)&&(elem.visite360!=="")){tmp_str+='<li id="result_fiche_btn_visite_360">';tmp_str+='<a href="#"><span class="picto"><svg viewBox="0 0 22 22" width="21" height="21" class="fill-dark">';tmp_str+='<path d="M19.009,3.799c0-.118-.034-.228-.083-.33-.009-.018-.015-.035-.025-.052-.055-.094-.128-.175-.218-.239-.008-.006-.011-.016-.019-.021-.011-.007-.025-.006-.037-.013-.031-.018-.058-.042-.092-.056L11.286,.06c-.192-.08-.407-.08-.598,.001L3.552,3.09c-.032,.014-.059,.036-.088,.054-.011,.007-.026,.006-.037,.013-.008,.005-.011,.016-.019,.021-.09,.065-.164,.145-.218,.24-.01,.017-.016,.034-.024,.051-.049,.102-.083,.212-.083,.33,0,0,0,0,0,0V12.127c0,.31,.186,.59,.472,.711l7.193,3.028c.037,.015,.077,.008,.115,.018,.062,.016,.119,.028,.183,.028,.065,0,.123-.013,.186-.029,.038-.009,.077-.002,.114-.017l7.193-3.028c.286-.121,.472-.401,.472-.711V3.802s0-.002,0-.002ZM10.991,1.606l5.247,2.193-5.22,2.181L5.832,3.796,10.991,1.606Zm-6.367,3.357l5.651,2.399v6.633l-5.651-2.38V4.963Zm12.844,6.652l-5.651,2.38V7.339l5.651-2.379v6.655Z" />';tmp_str+='<path d="M18.98,15.051c.548,.219,.987,.455,1.288,.719,.156,.138,.283,.26,.283,.414,0,.117-.084,.216-.188,.323-.212,.22-.527,.418-.92,.607-1.404,.677-3.699,1.157-6.389,1.321-.424,.026-.748,.392-.722,.816,.027,.424,.392,.748,.817,.722,3.457-.211,6.308-.951,7.713-1.895,.839-.563,1.231-1.238,1.231-1.895,0-.452-.175-.9-.549-1.317-.405-.45-1.081-.885-1.991-1.247-.395-.158-.844,.035-1.002,.43-.157,.396,.035,.844,.431,1.002h0Z" />';tmp_str+='<path d="M10.603,18.853l-1.878-2.218c-.275-.325-.761-.365-1.086-.089-.325,.274-.365,.761-.091,1.086h0s.624,.737,.624,.737c-2.314-.207-4.273-.652-5.524-1.255-.393-.189-.708-.387-.92-.607-.104-.107-.188-.206-.188-.323,0-.154,.126-.276,.283-.414,.3-.264,.74-.5,1.288-.719,.396-.158,.588-.606,.431-1.002-.158-.395-.607-.588-1.002-.43-.91,.363-1.586,.797-1.991,1.247-.374,.417-.549,.865-.549,1.317,0,.657,.392,1.332,1.231,1.895,1.296,.871,3.832,1.563,6.932,1.831l-.864,.731c-.325,.274-.366,.761-.09,1.086,.274,.325,.761,.365,1.086,.09l2.217-1.878c.325-.275,.366-.761,.09-1.086Z" />';tmp_str+='</svg></span>';tmp_str+='<span class="label">Visite virtuelle</span>';tmp_str+='</a></li>'}
if(!0){tmp_str+='<li id="result_fiche_btn_favori">';tmp_str+='<a><span class="picto"><svg viewBox="0 0 496 512" width="21" height="22" id="result_fiche_btn_favori_picto">';tmp_str+='<circle cx="248" cy="256" r="207" style="fill: ';if(getFavori(elem.nom)){tmp_str+='#000000'}else{tmp_str+='#FFFFFF'}
tmp_str+='"/>';tmp_str+='<path style="fill: ';if(getFavori(elem.nom)){tmp_str+='#FFFFFF'}else{tmp_str+='#000000'}
tmp_str+='" d="M248,8C111,8,0,119,0,256s111,248,248,248,248-111,248-248S385,8,248,8Zm123.5,272.3l-110.6,114.2c-7.1,7.4-18.7,7.4-25.9,0l-110.5-114.2c-32.1-33.2-30.2-88.2,5.7-118.8,31.3-26.7,77.9-21.9,106.6,7.7l11.3,11.6,11.3-11.6c28.7-29.6,75.3-34.4,106.6-7.7,35.8,30.6,37.7,85.6,5.5,118.8Z"/>';tmp_str+='</svg></span>';tmp_str+='<span class="label">Ajouter à mes coups de coeur</span>';tmp_str+='</a></li>'}
$("#result_fiche_btn_list").html(tmp_str);$('#fiche_cellule_axo').css({'visibility':'hidden','z-index':'1'});$('#fiche_krpano_visite').css({'visibility':'hidden','z-index':'1'});$('#fiche_krpano_aerien').css({'visibility':'hidden','z-index':'1'});if(elem.aerien!==null){$('#result_fiche_btn_vue_etage').off("click");$('#result_fiche_btn_vue_etage').on("click",function(){$('#fiche_cellule_axo').css({'visibility':'hidden','z-index':'1'});$('#fiche_krpano_aerien').css({'visibility':'hidden','z-index':'1'});$('#fiche_krpano_visite').css({'visibility':'hidden','z-index':'1'});let tri_volet_content_step02_fiche_scrollContent=document.getElementById('tri_volet_content_step02_fiche_scrollContent');let asset_viewer=document.getElementById('asset_viewer');tri_volet_content_step02_fiche_scrollContent.scrollTo({top:asset_viewer.offsetTop,behavior:'smooth'});fiche_swiper.slideTo(current_fiche_result_cellule_index);fiche_swiper.slideTo(current_fiche_result_aerien_index)})}
if((elem.aerien360!==null)&&(elem.aerien360!=="")){$('#result_fiche_btn_vue_etage_360').off("click");$('#result_fiche_btn_vue_etage_360').on("click",function(){if(!$('#fiche_krpano_aerien_iframe').attr('src').includes(elem.aerien360))
$('#fiche_krpano_aerien_iframe').attr('src',elem.aerien360);$('#fiche_cellule_axo').css({'visibility':'hidden','z-index':'1'});$('#fiche_krpano_visite').css({'visibility':'hidden','z-index':'1'});$('#fiche_krpano_aerien').css({'visibility':'visible','z-index':'3'});let tri_volet_content_step02_fiche_scrollContent=document.getElementById('tri_volet_content_step02_fiche_scrollContent');let asset_viewer=document.getElementById('asset_viewer');tri_volet_content_step02_fiche_scrollContent.scrollTo({top:asset_viewer.offsetTop,behavior:'smooth'})});$('#fiche_krpano_aerien_expand').off("click");$('#fiche_krpano_aerien_expand').on("click",function(){window.open(elem.aerien360,'_blank').focus()})}
if(elem.cellule!==null){$('#result_fiche_btn_plan_3D').off("click");$('#result_fiche_btn_plan_3D').on("click",function(){$('#fiche_cellule_axo').css({'visibility':'hidden','z-index':'1'});$('#fiche_krpano_aerien').css({'visibility':'hidden','z-index':'1'});$('#fiche_krpano_visite').css({'visibility':'hidden','z-index':'1'});let tri_volet_content_step02_fiche_scrollContent=document.getElementById('tri_volet_content_step02_fiche_scrollContent');let asset_viewer=document.getElementById('asset_viewer');tri_volet_content_step02_fiche_scrollContent.scrollTo({top:asset_viewer.offsetTop,behavior:'smooth'});fiche_swiper.slideTo(current_fiche_result_cellule_index)})}
if(elem.cellule_axo!==null){$('#result_fiche_btn_plan_axo').off("click");$('#result_fiche_btn_plan_axo').on("click",function(){if(!$('#fiche_cellule_axo_iframe').attr('src').includes(elem.cellule_axo))
$('#fiche_cellule_axo_iframe').attr('src',"axo/"+elem.cellule_axo+"/index.html");$('#fiche_krpano_aerien').css({'visibility':'hidden','z-index':'1'});$('#fiche_krpano_visite').css({'visibility':'hidden','z-index':'1'});$('#fiche_cellule_axo').css({'visibility':'visible','z-index':'3'});let tri_volet_content_step02_fiche_scrollContent=document.getElementById('tri_volet_content_step02_fiche_scrollContent');let asset_viewer=document.getElementById('asset_viewer');tri_volet_content_step02_fiche_scrollContent.scrollTo({top:asset_viewer.offsetTop,behavior:'smooth'})});$('#fiche_cellule_axo_expand').off("click");$('#fiche_cellule_axo_expand').on("click",function(){window.open("axo/"+elem.cellule_axo+"/index.html",'_blank').focus()})}
if(elem.pdf!==null){$('#result_fiche_btn_telecharger').off("click");$('#result_fiche_btn_telecharger').on("click",function(){$('#fiche_cellule_axo').css({'visibility':'hidden','z-index':'1'});$('#fiche_krpano_visite').css({'visibility':'hidden','z-index':'1'});$('#fiche_krpano_aerien').css({'visibility':'hidden','z-index':'1'});let tri_volet_content_step02_fiche_scrollContent=document.getElementById('tri_volet_content_step02_fiche_scrollContent');let asset_viewer=document.getElementById('asset_viewer');tri_volet_content_step02_fiche_scrollContent.scrollTo({top:asset_viewer.offsetTop,behavior:'smooth'});fiche_swiper.slideTo(0);console.log('---');window.open('PDV/'+elem.pdf+'.pdf','Plan PDF','resizable=yes,scrollbars=yes,status=yes')})}
if(elem.visite360!==null){$('#result_fiche_btn_visite_360').off("click");$('#result_fiche_btn_visite_360').on("click",function(){if(!$('#fiche_krpano_visite_iframe').attr('src').includes(elem.visite360))
$('#fiche_krpano_visite_iframe').attr('src',elem.visite360);$('#fiche_cellule_axo').css({'visibility':'hidden','z-index':'1'});$('#fiche_krpano_visite').css({'visibility':'visible','z-index':'3'});$('#fiche_krpano_aerien').css({'visibility':'hidden','z-index':'1'})});$('#fiche_krpano_visite_expand').off("click");$('#fiche_krpano_visite_expand').on("click",function(){window.open(elem.visite360,'_blank').focus()})}
$('#result_fiche_btn_favori').off("click");$('#result_fiche_btn_favori').on("click",function(){setFavori(elem.nom,!getFavori(elem.nom))})}
var current_cellule_list=[];var current_aerien_list=[];function initFicheResultSlideShow(elem){console.log("-- initFicheResultSlideShow");$('#fiche_swiper_container').css('display','none');$('#fiche_swiper_container').css('opacity','0');$('#fiche_swiper_wrapper').html("");fiche_swiper.slideTo(0);let tmp_str='';if(elem.pdf==null||elem.pdf===""){tmp_str+='<div class="swiper-slide">';tmp_str+='<img src="'+pdv_pas_de_plan+'" class="fiche_slide_img_pos" draggable="false" />';tmp_str+='<img src="'+pdv_pas_de_plan+'" class="fiche_slide_img" draggable="false" />';tmp_str+='</div>';$('#fiche_swiper_wrapper').append(tmp_str)}else{tmp_str+='<div class="swiper-slide">';tmp_str+='<img src="PDV/Vignettes/HD/'+elem.nom+'.jpg" class="fiche_slide_img_pos" draggable="false" />';tmp_str+='<img src="PDV/Vignettes/HD/'+elem.nom+'.jpg" class="fiche_slide_img" draggable="false" />';tmp_str+='<div class="item-visu-overlaycontainer item-visu-overlaycontainer-plan" elem_id="'+elem.id+'" index="'+0+'">';tmp_str+='<div class="slide_overlay">';tmp_str+='<svg class="slide_zoom_button slide_zoom_button_plan" viewBox="0 0 40 40" elem_id="'+elem.id+'" index="'+0+'">';tmp_str+='<rect width="40" height="40" style="fill: #fff; opacity:0;"/>';tmp_str+='<circle cx="20" cy="20" r="16.387" style="fill: #fff; stroke: #6a7076; stroke-miterlimit: 10; stroke-width: 1.5px;"/>';tmp_str+='<path style="fill: #6a7076;" d="M28.383,27.069l-4.031-4.031c-.076-.076-.176-.116-.282-.116h-.438c1.046-1.212,1.68-2.789,1.68-4.516,0-3.815-3.091-6.906-6.906-6.906s-6.906,3.091-6.906,6.906,';tmp_str+='3.091,6.906,6.906,6.906c1.727,0,3.304-.634,4.516-1.68v.438c0,.106,.043,.206,.116,.282l4.031,4.031c.156,.156,.408,.156,.564,0l.75-.75c.156-.156,.156-.408,0-.564Zm-9.978-3.35c-2.935,';tmp_str+='0-5.312-2.377-5.312-5.312s2.377-5.312,5.312-5.312,5.312,2.377,5.312,5.312-2.377,5.312-5.312,5.312Z" />';tmp_str+='</svg>';tmp_str+='</div>';tmp_str+='</div>';tmp_str+='</div>';$('#fiche_swiper_wrapper').append(tmp_str);if(!displayIsMobile){$('.slide_zoom_button_plan').each(function(index,element){$(element).off('click');$(element).on('click',function(){let id_lot=parseInt($(element).attr('elem_id'));let lot_elem=searchLotById(id_lot);if(elem.pdf!=null&&elem.pdf!=="")
window.open('PDV/'+lot_elem.pdf+'.pdf','PlansPDF','resizable=yes,scrollbars=yes,status=yes');})})}else{$('.item-visu-overlaycontainer-plan').each(function(index,element){$(element).off('click');$(element).on('click',function(){let id_lot=parseInt($(element).attr('elem_id'));let lot_elem=searchLotById(id_lot);if(elem.pdf!=null&&elem.pdf!=="")
window.open('PDV/'+lot_elem.pdf+'.pdf','PlansPDF','resizable=yes,scrollbars=yes,status=yes');})})}}
if((elem.cellule!==null)&&(elem.cellule!=="")){current_cellule_list=elem.cellule.split(' ');current_cellule_list.forEach(function(cellule_item,cellule_index){current_cellule_list[cellule_index]=cellule_item.trim();let current_cellule_src="cellules/"+current_cellule_list[cellule_index]+".jpg";tmp_str='';tmp_str+='<div class="swiper-slide">';tmp_str+='<img src="'+current_cellule_src+'" class="fiche_slide_img_pos" draggable="false" />';tmp_str+='<img src="'+current_cellule_src+'" class="fiche_slide_img" draggable="false" />';tmp_str+='<div class="item-visu-overlaycontainer item-visu-overlaycontainer-cellule" elem_id="'+elem.id+'" index="'+cellule_index+'">';tmp_str+='<div class="slide_overlay">';tmp_str+='<svg class="slide_zoom_button slide_zoom_button_cellule" viewBox="0 0 40 40" elem_id="'+elem.id+'" index="'+cellule_index+'">';tmp_str+='<rect width="40" height="40" style="fill: #fff; opacity:0;"/>';tmp_str+='<circle cx="20" cy="20" r="16.387" style="fill: #fff; stroke: #6a7076; stroke-miterlimit: 10; stroke-width: 1.5px;"/>';tmp_str+='<path style="fill: #6a7076;" d="M28.383,27.069l-4.031-4.031c-.076-.076-.176-.116-.282-.116h-.438c1.046-1.212,1.68-2.789,1.68-4.516,0-3.815-3.091-6.906-6.906-6.906s-6.906,3.091-6.906,6.906,';tmp_str+='3.091,6.906,6.906,6.906c1.727,0,3.304-.634,4.516-1.68v.438c0,.106,.043,.206,.116,.282l4.031,4.031c.156,.156,.408,.156,.564,0l.75-.75c.156-.156,.156-.408,0-.564Zm-9.978-3.35c-2.935,';tmp_str+='0-5.312-2.377-5.312-5.312s2.377-5.312,5.312-5.312,5.312,2.377,5.312,5.312-2.377,5.312-5.312,5.312Z" />';tmp_str+='</svg>';tmp_str+='</div>';tmp_str+='</div>';tmp_str+='</div>';$('#fiche_swiper_wrapper').append(tmp_str)});current_fiche_result_cellule_index=1;if(!displayIsMobile){$('.slide_zoom_button_cellule').each(function(index,element){$(element).off('click');$(element).on('click',function(){let id_lot=parseInt($(element).attr('elem_id'));let current_cellule_index=parseInt($(element).attr('index'));console.log("cellule zoom clicked - id: "+id_lot+" - index: "+current_cellule_index);openLightboxCellule(searchLotById(id_lot),current_cellule_index)})})}else{$('.item-visu-overlaycontainer-cellule').each(function(index,element){$(element).off('click');$(element).on('click',function(){let id_lot=parseInt($(element).attr('elem_id'));let current_cellule_index=parseInt($(element).attr('index'));console.log("cellule zoom clicked - id: "+id_lot+" - index: "+current_cellule_index);openLightboxCellule(searchLotById(id_lot),current_cellule_index)})})}}
if((elem.aerien!==null)&&(elem.aerien!=="")){current_aerien_list=elem.aerien.split(' ');current_aerien_list.forEach(function(aerien_item,aerien_index){current_aerien_list[aerien_index]=aerien_item.trim();let current_aerien_src="panos_aerien/"+current_aerien_list[aerien_index]+".jpg";tmp_str='';tmp_str+='<div class="swiper-slide">';tmp_str+='<img src="'+current_aerien_src+'" class="fiche_slide_img_pos" draggable="false" />';tmp_str+='<img src="'+current_aerien_src+'" class="fiche_slide_img" draggable="false" />';tmp_str+='<div class="item-visu-overlaycontainer item-visu-overlaycontainer-aerien">';tmp_str+='<div class="slide_overlay">';tmp_str+='<svg class="slide_zoom_button slide_zoom_button_aerien" viewBox="0 0 40 40" elem_id="'+elem.id+'" index="'+aerien_index+'">';tmp_str+='<rect width="40" height="40" style="fill: #fff; opacity:0;"/>';tmp_str+='<circle cx="20" cy="20" r="16.387" style="fill: #fff; stroke: #6a7076; stroke-miterlimit: 10; stroke-width: 1.5px;"/>';tmp_str+='<path style="fill: #6a7076;" d="M28.383,27.069l-4.031-4.031c-.076-.076-.176-.116-.282-.116h-.438c1.046-1.212,1.68-2.789,1.68-4.516,0-3.815-3.091-6.906-6.906-6.906s-6.906,3.091-6.906,6.906,';tmp_str+='3.091,6.906,6.906,6.906c1.727,0,3.304-.634,4.516-1.68v.438c0,.106,.043,.206,.116,.282l4.031,4.031c.156,.156,.408,.156,.564,0l.75-.75c.156-.156,.156-.408,0-.564Zm-9.978-3.35c-2.935,';tmp_str+='0-5.312-2.377-5.312-5.312s2.377-5.312,5.312-5.312,5.312,2.377,5.312,5.312-2.377,5.312-5.312,5.312Z" />';tmp_str+='</svg>';tmp_str+='</div>';tmp_str+='</div>';tmp_str+='</div>';$('#fiche_swiper_wrapper').append(tmp_str)});if((elem.cellule==null)||(elem.cellule=="")){current_fiche_result_aerien_index=1}else{current_fiche_result_aerien_index=1+current_cellule_list.length}
if(!displayIsMobile){$('.slide_zoom_button_aerien').each(function(index,element){$(element).off('click');$(element).on('click',function(){let id_lot=parseInt($(element).attr('elem_id'));let current_aerien_index=parseInt($(element).attr('index'));console.log("aerien zoom clicked - id: "+id_lot+" - index: "+current_aerien_index);openLightboxAerien(searchLotById(id_lot),current_aerien_index)})})}else{$('.item-visu-overlaycontainer-aerien').each(function(index,element){$(element).off('click');$(element).on('click',function(){let id_lot=parseInt($(element).attr('elem_id'));let current_aerien_index=parseInt($(element).attr('index'));console.log("aerien zoom clicked - id: "+id_lot+" - index: "+current_aerien_index);openLightboxAerien(searchLotById(id_lot),current_aerien_index)})})}}
fiche_swiper.update()}
function initFicheResultSlideShow_old(elem){console.log("-- initFicheResultSlideShow");let current_slide_count=$('#result_fiche_slideshow .slick-slide').length;for(let i=(current_slide_count-1);i>=0;i--){$('#result_fiche_slideshow').slick('slickRemove',i)}
let tmp_str='';tmp_str='<div class="item-visu">';tmp_str+='<div class="item-visu-subcontainer">';if(elem.pdf==null||elem.pdf===""){tmp_str+='<img src="'+pdv_pas_de_plan+'" draggable="false">'}else{tmp_str+='<img src="PDV/Vignettes/HD/'+elem.nom+'.jpg" draggable="false">';tmp_str+='<div class="item-visu-overlaycontainer item-visu-overlaycontainer-plan" elem_id="'+elem.id+'" index="'+0+'">';tmp_str+='<div class="slide_overlay">';tmp_str+='<svg class="slide_zoom_button slide_zoom_button_plan" viewBox="0 0 40 40" elem_id="'+elem.id+'" index="'+0+'">';tmp_str+='<rect width="40" height="40" style="fill: #fff; opacity:0;"/>';tmp_str+='<circle cx="20" cy="20" r="16.387" style="fill: #fff; stroke: #6a7076; stroke-miterlimit: 10; stroke-width: 1.5px;"/>';tmp_str+='<path style="fill: #6a7076;" d="M28.383,27.069l-4.031-4.031c-.076-.076-.176-.116-.282-.116h-.438c1.046-1.212,1.68-2.789,1.68-4.516,0-3.815-3.091-6.906-6.906-6.906s-6.906,3.091-6.906,6.906,';tmp_str+='3.091,6.906,6.906,6.906c1.727,0,3.304-.634,4.516-1.68v.438c0,.106,.043,.206,.116,.282l4.031,4.031c.156,.156,.408,.156,.564,0l.75-.75c.156-.156,.156-.408,0-.564Zm-9.978-3.35c-2.935,';tmp_str+='0-5.312-2.377-5.312-5.312s2.377-5.312,5.312-5.312,5.312,2.377,5.312,5.312-2.377,5.312-5.312,5.312Z" />';tmp_str+='</svg>';tmp_str+='</div>';tmp_str+='</div>'}
tmp_str+='</div>';tmp_str+='</div>';$('#result_fiche_slideshow').slick('slickAdd',tmp_str);if(!displayIsMobile){$('.slide_zoom_button_plan').each(function(index,element){$(element).off('click');$(element).on('click',function(){let id_lot=parseInt($(element).attr('elem_id'));let lot_elem=searchLotById(id_lot);if(elem.pdf!=null&&elem.pdf!=="")
window.open('PDV/'+lot_elem.pdf+'.pdf','PlansPDF','resizable=yes,scrollbars=yes,status=yes');})})}else{$('.item-visu-overlaycontainer-plan').each(function(index,element){$(element).off('click');$(element).on('click',function(){let id_lot=parseInt($(element).attr('elem_id'));let lot_elem=searchLotById(id_lot);if(elem.pdf!=null&&elem.pdf!=="")
window.open('PDV/'+lot_elem.pdf+'.pdf','PlansPDF','resizable=yes,scrollbars=yes,status=yes');})})}
if(elem.cellule!==null){current_cellule_list=elem.cellule.split(' ');current_cellule_list.forEach(function(cellule_item,cellule_index){current_cellule_list[cellule_index]=cellule_item.trim();let current_cellule_src="cellules/"+current_cellule_list[cellule_index]+".jpg";tmp_str='';tmp_str+='<div class="item-visu">';tmp_str+='<div class="item-visu-subcontainer">';tmp_str+='<img class="slideshow_cellule_recap_img" src="'+current_cellule_src+'" draggable="false">';tmp_str+='<div class="item-visu-overlaycontainer item-visu-overlaycontainer-cellule" elem_id="'+elem.id+'" index="'+cellule_index+'">';tmp_str+='<div class="slide_overlay">';tmp_str+='<svg class="slide_zoom_button slide_zoom_button_cellule" viewBox="0 0 40 40" elem_id="'+elem.id+'" index="'+cellule_index+'">';tmp_str+='<rect width="40" height="40" style="fill: #fff; opacity:0;"/>';tmp_str+='<circle cx="20" cy="20" r="16.387" style="fill: #fff; stroke: #6a7076; stroke-miterlimit: 10; stroke-width: 1.5px;"/>';tmp_str+='<path style="fill: #6a7076;" d="M28.383,27.069l-4.031-4.031c-.076-.076-.176-.116-.282-.116h-.438c1.046-1.212,1.68-2.789,1.68-4.516,0-3.815-3.091-6.906-6.906-6.906s-6.906,3.091-6.906,6.906,';tmp_str+='3.091,6.906,6.906,6.906c1.727,0,3.304-.634,4.516-1.68v.438c0,.106,.043,.206,.116,.282l4.031,4.031c.156,.156,.408,.156,.564,0l.75-.75c.156-.156,.156-.408,0-.564Zm-9.978-3.35c-2.935,';tmp_str+='0-5.312-2.377-5.312-5.312s2.377-5.312,5.312-5.312,5.312,2.377,5.312,5.312-2.377,5.312-5.312,5.312Z" />';tmp_str+='</svg>';tmp_str+='</div>';tmp_str+='</div>';tmp_str+='</div>';tmp_str+='</div>';$('#result_fiche_slideshow').slick('slickAdd',tmp_str)});current_fiche_result_cellule_index=1;if(!displayIsMobile){$('.slide_zoom_button_cellule').each(function(index,element){$(element).off('click');$(element).on('click',function(){let id_lot=parseInt($(element).attr('elem_id'));let current_cellule_index=parseInt($(element).attr('index'));console.log("cellule zoom clicked - id: "+id_lot+" - index: "+current_cellule_index);openLightboxCellule(searchLotById(id_lot),current_cellule_index)})})}else{$('.item-visu-overlaycontainer-cellule').each(function(index,element){$(element).off('click');$(element).on('click',function(){let id_lot=parseInt($(element).attr('elem_id'));let current_cellule_index=parseInt($(element).attr('index'));console.log("cellule zoom clicked - id: "+id_lot+" - index: "+current_cellule_index);openLightboxCellule(searchLotById(id_lot),current_cellule_index)})})}}
if(elem.aerien!==null){current_aerien_list=elem.aerien.split(' ');current_aerien_list.forEach(function(aerien_item,index){current_aerien_list[index]=aerien_item.trim();let current_aerien_src="panos_aerien/"+current_aerien_list[index]+".jpg";tmp_str='<div class="item-visu">';tmp_str+='<div class="item-visu-subcontainer">';tmp_str+='<img class="slideshow_aerien_recap_img" src="'+current_aerien_src+'" id="'+elem.id+'" draggable="false">';tmp_str+='<div class="item-visu-overlaycontainer item-visu-overlaycontainer-aerien" elem_id="'+elem.id+'" index="'+index+'">';tmp_str+='<div class="slide_overlay">';tmp_str+='<svg class="slide_zoom_button slide_zoom_button_aerien" viewBox="0 0 40 40" elem_id="'+elem.id+'" index="'+index+'">';tmp_str+='<rect width="40" height="40" style="fill: #fff; opacity:0;"/>';tmp_str+='<circle cx="20" cy="20" r="16.387" style="fill: #fff; stroke: #6a7076; stroke-miterlimit: 10; stroke-width: 1.5px;"/>';tmp_str+='<path style="fill: #6a7076;" d="M28.383,27.069l-4.031-4.031c-.076-.076-.176-.116-.282-.116h-.438c1.046-1.212,1.68-2.789,1.68-4.516,0-3.815-3.091-6.906-6.906-6.906s-6.906,3.091-6.906,6.906,';tmp_str+='3.091,6.906,6.906,6.906c1.727,0,3.304-.634,4.516-1.68v.438c0,.106,.043,.206,.116,.282l4.031,4.031c.156,.156,.408,.156,.564,0l.75-.75c.156-.156,.156-.408,0-.564Zm-9.978-3.35c-2.935,';tmp_str+='0-5.312-2.377-5.312-5.312s2.377-5.312,5.312-5.312,5.312,2.377,5.312,5.312-2.377,5.312-5.312,5.312Z" />';tmp_str+='</svg>';tmp_str+='</div>';tmp_str+='</div>';tmp_str+='</div>';tmp_str+='</div>';$('#result_fiche_slideshow').slick('slickAdd',tmp_str)});if(elem.cellule==null){current_fiche_result_aerien_index=1}else{current_fiche_result_aerien_index=1+current_cellule_list.length}
if(!displayIsMobile){$('.slide_zoom_button_aerien').each(function(index,element){$(element).off('click');$(element).on('click',function(){let id_lot=parseInt($(element).attr('elem_id'));let current_aerien_index=parseInt($(element).attr('index'));console.log("aerien zoom clicked - id: "+id_lot+" - index: "+current_aerien_index);openLightboxAerien(searchLotById(id_lot),current_aerien_index)})})}else{$('.item-visu-overlaycontainer-aerien').each(function(index,element){$(element).off('click');$(element).on('click',function(){let id_lot=parseInt($(element).attr('elem_id'));let current_aerien_index=parseInt($(element).attr('index'));console.log("aerien zoom clicked - id: "+id_lot+" - index: "+current_aerien_index);openLightboxAerien(searchLotById(id_lot),current_aerien_index)})})}}
window.setTimeout(function(){window.dispatchEvent(new Event('resize'))},300)}
function searchResultByName(liste_resultats,nom){tmp_result=null;liste_resultats.forEach(function(elem){if(elem.nom==nom)tmp_result=elem});return tmp_result}
function getEtageDisplayName(etage_name){return etages_display_noms[etages_noms.indexOf(etage_name)]}
function tri_close_volet(){if($('#tri_menu_gauche').hasClass('open'))$('#tri_menu_gauche').removeClass('open');}
function initFavoris(){$('#fav_button_open_volet').on('click',function(){displayFavoris();closeVideoAndGalerie();$('#MODAL-favoris').addClass('open')});$('.close-fav').on('click',function(){$('#MODAL-favoris').removeClass('open')});if(!displayIsMobile){$('#MODAL_favoris_content_items').slick({infinite:!1,slidesToShow:3,slidesToScroll:1,appendArrows:$("#MODAL-favoris"),})}else{$('#MODAL_favoris_content_items').slick({infinite:!1,slidesToShow:2,slidesToScroll:1,appendArrows:$("#MODAL-favoris"),})}}
function displayFavoris(){let current_slide_count=$('#MODAL_favoris_content_items .slick-slide').length;for(let i=(current_slide_count-1);i>=0;i--){$('#MODAL_favoris_content_items').slick('slickRemove',i)}
tri_lots_favoris=getFavorisList();let nombre_favoris=tri_lots_favoris.length;if(nombre_favoris>1){$('#fav_total_logements').html(nombre_favoris+" logements")}else{$('#fav_total_logements').html(nombre_favoris+" logement")}
tri_lots_favoris.forEach(function(elem){let str='';str+='<div class="MODAL-favoris_content_item type-'+elem.type+'" id="MODAL_favoris_content_item_'+elem.nom+'">';str+='<p class="title">'+elem.type+' : <strong>'+elem.nom+'</strong>';if(elem.prix!==null)str+=' - '+elem.prix+' &euro;';str+='</p>';str+='<div class="item-visu">';if(elem.pdf==null||elem.pdf===""){str+='<img src="'+pdv_pas_de_plan+'">'}else{str+='<img src="PDV/Vignettes/HD/'+elem.nom+'.jpg">'}
str+='</div>';str+='<p class="fav-type">';str+='Appartement ';switch(elem.type){case 'T1':str+="1 pièce";break;case 'T1D':str+="1 pièce";break;case 'T1B':str+="1 pièce";break;case 'T2':str+="2 pièces";break;case 'T2D':str+="2 pièce";break;case 'T2B':str+="2 pièce";break;case 'T3':str+="3 pièces";break;case 'T3D':str+="3 pièces";break;case 'T3B':str+="3 pièce";break;case 'T4':str+="4 pièces";break;case 'T4D':str+="4 pièces";break;case 'T4B':str+="4 pièce";break;case 'T5':str+="5 pièces";break;case 'T5D':str+="5 pièces";break;case 'T5B':str+="5 pièce";break;case 'T6':str+="6 pièces";break;case 'T6D':str+="6 pièces";break;case 'T6B':str+="6 pièce";break;case 'T7':str+="7 pièces";break;case 'T7D':str+="7 pièces";break;case 'T7B':str+="7 pièces";break;case 'T8':str+="8 pièces";break;case 'T8D':str+="8 pièces";break;case 'T8B':str+="7 pièces";break;case 'T9':str+="9 pièces";break;case 'T9D':str+="9 pièces";break;case 'T9B':str+="7 pièces";break}
let is_Bat_defined=!0;if(is_Bat_defined){str+="<br>";str+="Bâtiment "+elem.nom.substring(0,1)}
str+='</p>';str+='<p class="fav-detail">';str+='<strong>Surface :</strong> '+elem.surface+'<br>';if((elem.surface_annexe!==null)&&(elem.surface_annexe!=="xx.xx"))
str+='<strong>Surface annexe :</strong> '+elem.surface_annexe+'<br>';str+='<strong>Étage :</strong> '+getEtageDisplayName(elem.niveau)+'<br>';if(elem.orientation!==null)
str+='<strong>Orientation :</strong> '+elem.orientation+'<br>';if(elem.nbre_chambres!==null){str+="<strong>Chambres :</strong> "+elem.nbre_chambres+"<br>"}else{switch(elem.type){case 'T2':str+="<strong>Chambres :</strong> 1<br>";break;case 'T2D':str+="<strong>Chambres :</strong> 1<br>";break;case 'T2B':str+="<strong>Chambres :</strong> 1<br>";break;case 'T3':str+="<strong>Chambres :</strong> 2<br>";break;case 'T3D':str+="<strong>Chambres :</strong> 2<br>";break;case 'T3B':str+="<strong>Chambres :</strong> 2<br>";break;case 'T4':str+="<strong>Chambres :</strong> 3<br>";break;case 'T4D':str+="<strong>Chambres :</strong> 3<br>";break;case 'T4B':str+="<strong>Chambres :</strong> 3<br>";break;case 'T5':str+="<strong>Chambres :</strong> 4<br>";break;case 'T5D':str+="<strong>Chambres :</strong> 4<br>";break;case 'T5B':str+="<strong>Chambres :</strong> 4<br>";break;case 'T6':str+="<strong>Chambres :</strong> 5<br>";break;case 'T6D':str+="<strong>Chambres :</strong> 5<br>";break;case 'T6B':str+="<strong>Chambres :</strong> 5<br>";break;case 'T7':str+="<strong>Chambres :</strong> 6<br>";break;case 'T7D':str+="<strong>Chambres :</strong> 6<br>";break;case 'T7B':str+="<strong>Chambres :</strong> 6<br>";break;case 'T8':str+="<strong>Chambres :</strong> 7<br>";break;case 'T8D':str+="<strong>Chambres :</strong> 7<br>";break;case 'T8B':str+="<strong>Chambres :</strong> 7<br>";break;case 'T9':str+="<strong>Chambres :</strong> 8<br>";break;case 'T9D':str+="<strong>Chambres :</strong> 8<br>";break;case 'T9B':str+="<strong>Chambres :</strong> 8<br>";break}}
if(elem.nbre_sdb!==null)
str+="<strong>Salles de bain/d\'eau :</strong> "+elem.nbre_sdb;str+='</p>';str+='<a href="#" class="remove-fav" id="remove_fav_'+elem.nom+'">';str+='<svg viewBox="0 0 496 512" width="26" height="26">';str+='<path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm123.5 272.3L260.9 394.5c-7.1 7.4-18.7 7.4-25.9 0L124.5 280.3c-32.1-33.2-30.2-88.2 5.7-118.8 31.3-26.7 77.9-21.9 106.6 7.7l11.3 11.6 11.3-11.6c28.7-29.6 75.3-34.4 106.6-7.7 35.8 30.6 37.7 85.6 5.5 118.8z"/>';str+='</svg>';str+='Retirer des coups de coeurs';str+='</a>';str+='<a href="#" class="fav-view-fiche" id="fav_view_fiche_'+elem.nom+'">Fiche détaillée</a>';$('#MODAL_favoris_content_items').slick('slickAdd',str)});$('.remove-fav').each(function(index){$(this).off('click');$(this).on('click',function(e){let nom_lot=$(this).attr('id').substring(11);let fav_container=document.getElementById('MODAL_favoris_content_item_'+nom_lot);let fav_index=Array.prototype.indexOf.call(fav_container.parentNode.children,fav_container);$('#MODAL_favoris_content_items').slick('slickRemove',fav_index);setFavori(nom_lot,!1);let nombre_favoris=tri_lots_favoris.length;if(nombre_favoris>1){$('#fav_total_logements').html(nombre_favoris+" logements")}else{$('#fav_total_logements').html(nombre_favoris+" logement")}
if(nombre_favoris==0){$('#MODAL-favoris').removeClass('open')}})});$('.fav-view-fiche').each(function(index){$(this).off('click');$(this).on('click',function(e){let nom_lot=$(this).attr('id').substring(15);$('#MODAL-favoris').removeClass('open');initFicheRecap(nom_lot);$('.back-results').hide();$('#tri_menu_gauche').addClass('open');$('#tri_menu_gauche').removeClass('step01').addClass('step02')})});$('#fav_back_search').off('click');$('#fav_back_search').on('click',function(){$('#MODAL-favoris').removeClass('open');$('#tri_menu_gauche').addClass('open');$('#tri_menu_gauche').removeClass('step02').addClass('step01');$('.view-tabs').show();$('.label-fiche').hide()});$('#zip_download').off('click');$('#zip_download').on('click',function(e){let count_images_not_null=0;document.getElementById('loader_text').textContent="Création Zip";showLoader();tri_lots_favoris=getFavorisList()
tri_favoris_zip=new JSZip();tri_lots_favoris.forEach(function(el){if(!(el.pdf==null||el.pdf==="")){tri_favoris_zip.file(el.pdf+'.pdf',urlToPromise('PDV/'+el.pdf+'.pdf'),{binary:!0});count_images_not_null++}});if((tri_lots_favoris.length>0)&&(count_images_not_null>0)){tri_favoris_zip.generateAsync({type:"blob"}).then(function(blob){eraseLoader();saveAs(blob,"plans.zip");console.log("Zip des plans done !")},function(err){console.log(err)})}else{eraseLoader()}})}
function setFavori(nom_lot,isFavori){let lot_entries=searchLotIndexByNom(nom_lot);lot_entries.forEach(function(lot_entry){if(isFavori){lots[lot_entry].favori=1}else{lots[lot_entry].favori=0}});if(getFavorisList().length>0){$('#fav_button_open_volet').css('display','flex')}else{$('#fav_button_open_volet').css('display','none')}
let currentPanelName=panel_lib.panel_numlot_prix.panel_numlot_txt.text;if(currentPanelName==nom_lot){if(isFavori){panel_lib.panel_bt_coeur.gotoAndStop(1)}else{panel_lib.panel_bt_coeur.gotoAndStop(0)}}
if($('#fiche_titre_lot').html()==nom_lot){if(isFavori){$('#result_fiche_btn_favori_picto circle').css('fill','#ffffff');$('#result_fiche_btn_favori_picto path').css('fill','#d36464');$('#result_fiche_btn_favori span.label').html("Retirer de mes coups de coeur")}else{$('#result_fiche_btn_favori_picto circle').css('fill','#FFFFFF');$('#result_fiche_btn_favori_picto path').css('fill','#000000');$('#result_fiche_btn_favori span.label').html("Ajouter à mes coups de coeur")}}}
function getFavori(nom){let lot_entries=searchLotIndexByNom(nom);let result=!1;if(lot_entries.length>0){if(lots[lot_entries[0]].favori==1)result=!0}
return result}
function getFavorisList(){let tri_lots_clean_tmp=[...lots.reduce((map,obj)=>map.has(obj.nom)?map:map.set(obj.nom,obj),new Map()).values()];tri_lots_favoris=[...tri_lots_clean_tmp.reduce((map,obj)=>(obj.favori==0)?map:map.set(obj.nom,obj),new Map()).values()];return(tri_lots_favoris)}
function newRect(x,y,width,height){return new Object({x:x,y:y,width:width,height:height})}
function newVector2D(x,y){return new Object({x:x,y:y})}
function simulateKeyEvent(){var keyEvent=new KeyboardEvent("keypress",{key:"Shift",keyCode:'16',shiftKey:!0});document.dispatchEvent(keyEvent)}
var onImgLoad2=function(selector,callback){$(selector).each(function(){if(this.complete||$(this).height()>0){callback.apply(this)}else{$(this).on('load',function(){callback.apply(this)})}})};function contains(str,expr){var contain;var re=new RegExp(expr,"g");var res=str.match(re);if(res==null){contain=!1}else{contain=!0}
return contain}
function pad(num,size){var s=Math.abs(num)+"";while(s.length<size)s="0"+s;return s}
function calculateDistance(vector1,vector2){var lat1=(vector1.x*2.0*Math.PI)/60.0/360.0;var long1=(vector1.y*2.0*Math.PI)/60.0/360.0;var lat2=(vector2.x*2.0*Math.PI)/60.0/360.0;var long2=(vector2.y*2.0*Math.PI)/60.0/360.0;var a=6378137.0;var b=6356752.3142;var f=(a-b)/a;var e=2.0*f-f*f;var beta=(a/Math.sqrt(1.0-e*Math.sin(lat1)*Math.sin(lat1)));var cos=Math.cos(lat1);var x=beta*cos*Math.cos(long1);var y=beta*cos*Math.sin(long1);var z=beta*(1-e)*Math.sin(lat1);beta=(a/Math.sqrt(1.0-e*Math.sin(lat2)*Math.sin(lat2)));cos=Math.cos(lat2);x-=(beta*cos*Math.cos(long2));y-=(beta*cos*Math.sin(long2));z-=(beta*(1-e)*Math.sin(lat2));return(Math.sqrt((x*x)+(y*y)+(z*z))/1000)}
function isIniFrame(){return(window.location!==window.parent.location)}
function isMobile(){return(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))}
function isIOS(){return(/iPhone|iPad|iPod/i.test(navigator.userAgent))}
function preloadImg(uri){return new Promise((resolve,reject)=>{image=new Image();image.src=uri;image.onload=function(){resolve()}
image.onerror=function(err){reject(err)}})}
function urlToPromise(url){return new Promise(function(resolve,reject){JSZipUtils.getBinaryContent(url,function(err,data){if(err){reject(err)}else{resolve(data)}})})}
function formatNumber(number,digits){number+='';if(number.length>digits){return number}else{let return_prefix='';for(let i=1;i<=(digits-number.length);i++){return_prefix+='0'}
return return_prefix+=number}}
function my_sleep(miliseconds){var currentTime=new Date().getTime();while(currentTime+miliseconds>=new Date().getTime()){}
console.log("sleep done")}
function theTouchisEnabled(){let deviceAgent=navigator.userAgent.toLowerCase();return(window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0)||(window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)||(deviceAgent.match(/(iphone|ipod|ipad)/)||deviceAgent.match(/(android)/)||deviceAgent.match(/(iemobile)/)||deviceAgent.match(/iphone/i)||deviceAgent.match(/ipad/i)||deviceAgent.match(/ipod/i)||deviceAgent.match(/blackberry/i)||deviceAgent.match(/mobile/i)||deviceAgent.match(/bada/i))}
function elliptical_arc(angle){const cos=Math.cos;const sin=Math.sin;const PI=Math.PI;let cx=78;let cy=78;let rx=70;let ry=70;let t1=225/180*PI;let current_angle=angle/180*PI;let rotation=0;const f_matrix_times=(([[a,b],[c,d]],[x,y])=>[a*x+b*y,c*x+d*y]);const f_rotate_matrix=((x)=>{const cosx=cos(x);const sinx=sin(x);return[[cosx,-sinx],[sinx,cosx]]});const f_vec_add=(([a1,a2],[b1,b2])=>[a1+b1,a2+b2]);const f_svg_ellipse_arc=(([cx,cy],[rx,ry],[t1,current_angle],rotation)=>{current_angle=current_angle%(2*PI);const rotMatrix=f_rotate_matrix(rotation);const[sX,sY]=(f_vec_add(f_matrix_times(rotMatrix,[rx*cos(t1),ry*sin(t1)]),[cx,cy]));const[eX,eY]=(f_vec_add(f_matrix_times(rotMatrix,[rx*cos(t1+current_angle),ry*sin(t1+current_angle)]),[cx,cy]));const fA=((current_angle>PI)?1:0);const fS=((current_angle>0)?1:0);return[" M ",sX," ",sY," A ",rx,ry,rotation/PI*180,fA,fS,eX,eY].join(" ")});return f_svg_ellipse_arc([cx,cy],[rx,ry],[t1,current_angle],rotation)}
function capitalize(str){str=str.toLowerCase();str=str[0].toUpperCase()+str.substring(1);return str}
function normalizeString(str){str=str.trim();str=str.replace(/</g,"&lt;").replace(/>/g,"&gt;");str=str.replace(' ','');str=str.replace('	','');let digits_str=str.match(/\d+/);str=str.replace(digits_str,formatNumber(parseInt(digits_str),3));str=str.toUpperCase();return str}
function cleanString(str){str=str.trim();str=str.replace(' ','');str=str.toLowerCase();return str}
function isFullScreen(){let isFullScreen=(document.fullScreenElement&&document.fullScreenElement!==null)||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;return isFullScreen}
function fullscreenMode(){theFrameInFullscreen=!theFrameInFullscreen
var elem=document.body;var isInFullScreen=isFullScreen();if(isInFullScreen){let requestMethod=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.exitFullscreen;if(requestMethod){requestMethod.call(document)}else if(typeof window.ActiveXObject!=="undefined"){let wscript=new ActiveXObject("WScript.Shell");if(wscript!==null){wscript.SendKeys("{F11}")}}}else{let requestMethod=elem.requestFullScreen||elem.webkitRequestFullScreen||elem.mozRequestFullScreen||elem.msRequestFullScreen;if(requestMethod){requestMethod.call(elem)}else if(typeof window.ActiveXObject!=="undefined"){let wscript=new ActiveXObject("WScript.Shell");if(wscript!==null){wscript.SendKeys("{F11}")}}}}
function detectIE(){let ua=window.navigator.userAgent;let msie=ua.indexOf('MSIE ');if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf('.',msie)),10)}
let trident=ua.indexOf('Trident/');if(trident>0){var rv=ua.indexOf('rv:');return parseInt(ua.substring(rv+3,ua.indexOf('.',rv)),10)}
let edge=ua.indexOf('Edge/');if(edge>0){return parseInt(ua.substring(edge+5,ua.indexOf('.',edge)),10)}
return!1}